{"name":"centos","slug":"centos","count":1,"postlist":[{"title":"Centos7 重新分配数据盘","slug":"Centos7-重新分配数据盘","date":"2018-12-11T09:51:47.000Z","updated":"2018-12-11T09:51:47.289Z","comments":true,"path":"api/articles/Centos7-重新分配数据盘.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 假设有一块 500G的空间分配给了/home 现在需要重新进行分配 /home 100G 和 /opt 400G</span></span><br><span class=\"line\"></span><br><span class=\"line\">==注意备份数据==</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 卸载/home, 如果无法卸载请先终止使用/home的进程</span></span><br><span class=\"line\">umount /home</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 删除/home所在的lv</span></span><br><span class=\"line\">lvremove /dev/mapper/cl-home</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 新创建一个容量为100G的/home lv</span></span><br><span class=\"line\">lvcreate -L 100G -n home cl</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 创建文件系统</span></span><br><span class=\"line\">mkfs.xfs /dev/cl/home</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 挂载此lv到/home目录</span></span><br><span class=\"line\">mount /dev/cl/home /home </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 新创建一个容量为400G的/opt lv</span></span><br><span class=\"line\">lvcreate -L 400G -n opt cl</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 创建文件系统</span></span><br><span class=\"line\">mkfs.xfs /dev/cl/opt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 挂载此lv到/opt</span></span><br><span class=\"line\">mount /dev/cl/opt /opt </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 编辑系统磁盘</span></span><br><span class=\"line\">vi /ect/fstab</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 添加两行配置</span></span><br><span class=\"line\">/dev/mapper/cl-home     /home                   xfs     defaults        0 0</span><br><span class=\"line\">/dev/mapper/cl-opt      /opt                    xfs     defaults        0 0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 验证配置是否正确</span></span><br><span class=\"line\">mount -a</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 重新进行一次 mount</span></span><br><span class=\"line\">mount -n -o remount,rw /</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 重启服务器</span></span><br><span class=\"line\">init 6</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"mount","slug":"Centos/mount","count":2,"path":"api/categories/Centos/mount.json"}],"tags":[{"name":"mount","slug":"mount","count":2,"path":"api/tags/mount.json"},{"name":"disk","slug":"disk","count":4,"path":"api/tags/disk.json"},{"name":"centos","slug":"centos","count":1,"path":"api/tags/centos.json"}]}]}itle":"Centos 安装 Solr","slug":"Centos-安装-Solr","date":"2018-12-11T10:20:21.000Z","updated":"2018-12-11T10:20:22.008Z","comments":true,"path":"api/articles/Centos-安装-Solr.json","excerpt":"","keywords":null,"cover":null,"content":"<p>首先下载 点击下载:<br><a href=\"http://www.apache.org/dyn/closer.cgi/lucene/solr/5.1.0\" target=\"_blank\" rel=\"noopener\">Solr-5.1.0 </a><br> (注下载:solr-5.1.0.tgz)   点击下载:<br><a href=\"http://tomcat.apache.org/download-70.cgi\" target=\"_blank\" rel=\"noopener\">Tomcat-7.0.62.tar.gz </a></p>\n<p>注意:默认下载的存放路径为Centos的登陆用户的根目录</p>\n<p>然后在Centos上准备一个目录:如 /tools/<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#### 部署tomcat ####</span></span><br><span class=\"line\"><span class=\"comment\">###解压</span></span><br><span class=\"line\">tar -xzvf Tomcat-7.0.62.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###复制到安装目录</span></span><br><span class=\"line\">cp ~/tomcat-7.0.62 /tools/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###进入bin</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /tools/tomcat-7.0.62/bin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###启动Tomcat</span></span><br><span class=\"line\">./startup.sh</span><br></pre></td></tr></table></figure></div></p>\n<p>操作Solr<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#### 部署Solr ####</span></span><br><span class=\"line\"><span class=\"comment\">###解压Solr</span></span><br><span class=\"line\">tar -xzvf solr-5.1.0.tar</span><br></pre></td></tr></table></figure></div></p>\n<p>上传solr.war到Tomcat然后关闭tomcat.</p>\n<p>配置Solr:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">###进入tomcat的solr目录:</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /tools/tomcat-7.0.62/webapps/solr/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###建立Solr_Home</span></span><br><span class=\"line\">mkdir solr_home</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###配置Solr的web.xml</span></span><br><span class=\"line\">vi web.xml</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###修改内容,取消env-entry的注释</span></span><br><span class=\"line\">&lt;env-entry&gt;</span><br><span class=\"line\">   &lt;env-entry-name&gt;solr/home&lt;/env-entry-name&gt;</span><br><span class=\"line\">   &lt;env-entry-value&gt;/tools/tomcat-7.0.62/webapps/solr/solr_home&lt;/env-entry-value&gt;</span><br><span class=\"line\">   &lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt;</span><br><span class=\"line\">&lt;/env-entry&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 保存退出</span></span><br><span class=\"line\">Esc  :wq</span><br></pre></td></tr></table></figure></div></p>\n<p>配置Solr的日志:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 复制相关Jar到Solr的lib中</span></span><br><span class=\"line\">cp ~/solr-5.1.0/server/lib/ext/* /tools/tomcat-7.0.62/webapps/solr/WEB-INF/lib/</span><br><span class=\"line\"><span class=\"comment\">### 复制log4j的配置文件到solr中</span></span><br><span class=\"line\">cp ~/solr-5.1.0/server/resources/log4j.properties /tools/tomcat-7.0.62/webapps/solr/WEB-INF/classes/</span><br></pre></td></tr></table></figure></div></p>\n<p>重新启动Tomcat</p>\n<p>访问: <a href=\"http://127.0.0.1:8080/solr/\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:8080/solr/</a></p>\n","text":"首先下载 点击下载:<br>Solr-5.1.0 <br> (注下载:solr-5.1.0.tgz)   点击下载:<br>Tomcat-7.0.62.tar.gz 注意:默认下载的存放路径为Centos的登陆用户的根目录然后在Centos上准备一个目录:如 /tools/<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"solr","slug":"Centos/solr","count":1,"path":"api/categories/Centos/solr.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"solr","slug":"solr","count":1,"path":"api/tags/solr.json"},{"name":"tomcat","slug":"tomcat","count":3,"path":"api/tags/tomcat.json"}]},{"title":"Centos 安装 Scala","slug":"Centos-安装-Scala","date":"2018-12-11T09:53:44.000Z","updated":"2018-12-11T09:53:44.795Z","comments":true,"path":"api/articles/Centos-安装-Scala.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 下载: http://www.scala-lang.org/download/all.html</span></span><br><span class=\"line\"><span class=\"comment\">## 下载地址: https://downloads.lightbend.com/scala/2.12.2/scala-2.12.2.rpm</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 使用本地安装</span></span><br><span class=\"line\"></span><br><span class=\"line\">yum localinstall -y scala-2.12.2.rpm</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看版本</span></span><br><span class=\"line\"></span><br><span class=\"line\">scala -version</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 测试</span></span><br><span class=\"line\"></span><br><span class=\"line\">scala</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>## 下载: http://www.scala-lang.org/download/all.html<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"scala","slug":"Centos/scala","count":1,"path":"api/categories/Centos/scala.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"scala","slug":"scala","count":1,"path":"api/tags/scala.json"},{"name":"install","slug":"install","count":9,"path":"api/tags/install.json"}]},{"title":"Centos7 安装 memcached 1.4.25","slug":"Centos7-安装-memcached-1-4-25","date":"2018-12-12T02:10:23.000Z","updated":"2018-12-12T02:10:23.441Z","comments":true,"path":"api/articles/Centos7-安装-memcached-1-4-25.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 下载memcached</span></span><br><span class=\"line\">wget http://memcached.org/files/memcached-1.4.25.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装 libevent</span></span><br><span class=\"line\">yum install libevent-devel.x86_64 -y</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 解压Memcached</span></span><br><span class=\"line\">tar -zvxf memcached-1.4.25.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 进入memcached目录</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> memcached-1.4.25</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 设定安装位置</span></span><br><span class=\"line\">./configure --prefix=/opt/apps/memcached</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装 </span></span><br><span class=\"line\">make &amp; make install</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /opt/apps/memcached/bin</span><br><span class=\"line\"></span><br><span class=\"line\">./memcached -d -m 256 -u root -p 11211 -c 1024 –P /tmp/memcached.pid</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 参数说明:</span></span><br><span class=\"line\">-p       监听的TCP端口(默认: 11211)  </span><br><span class=\"line\">-U       监听的UDP端口(默认: 11211, 0表示不监听)  </span><br><span class=\"line\">-s      用于监听的UNIX套接字路径（禁用网络支持）  </span><br><span class=\"line\">-a      UNIX套接字访问掩码，八进制数字（默认：0700）  </span><br><span class=\"line\">-l   监听的IP地址。（默认：INADDR_ANY，所有地址）  </span><br><span class=\"line\">-d            作为守护进程来运行。  </span><br><span class=\"line\">-r            最大核心文件限制。  </span><br><span class=\"line\">-u  设定进程所属用户。（只有root用户可以使用这个参数）  </span><br><span class=\"line\">-m       单个数据项的最大可用内存，以MB为单位。（默认：64MB）  </span><br><span class=\"line\">-M            内存用光时报错。（不会删除数据）  </span><br><span class=\"line\">-c       最大并发连接数。（默认：1024）  </span><br><span class=\"line\">-k            锁定所有内存页。注意你可以锁定的内存上限。  </span><br><span class=\"line\">              试图分配更多内存会失败的，所以留意启动守护进程时所用的用户可分配的内存上限。  </span><br><span class=\"line\">              （不是前面的 -u  参数；在sh下，使用命令<span class=\"string\">\"ulimit -S -l NUM_KB\"</span>来设置。）  </span><br><span class=\"line\">-v            提示信息（在事件循环中打印错误/警告信息。）  </span><br><span class=\"line\">-vv           详细信息（还打印客户端命令/响应）  </span><br><span class=\"line\">-vvv          超详细信息（还打印内部状态的变化）  </span><br><span class=\"line\">-h            打印这个帮助信息并退出。  </span><br><span class=\"line\">-i            打印memcached和libevent的许可。  </span><br><span class=\"line\">-P      保存进程ID到指定文件，只有在使用 -d 选项的时候才有意义。  </span><br><span class=\"line\">-f    块大小增长因子。（默认：1.25）  </span><br><span class=\"line\">-n     分配给key+value+flags的最小空间（默认：48）  </span><br><span class=\"line\">-L            尝试使用大内存页（如果可用的话）。提高内存页尺寸可以减少<span class=\"string\">\"页表缓冲（TLB）\"</span>丢失次数，提高运行效率。  </span><br><span class=\"line\">              为了从操作系统获得大内存页，memcached会把全部数据项分配到一个大区块。  </span><br><span class=\"line\">-D      使用  作为前缀和ID的分隔符。  </span><br><span class=\"line\">              这个用于按前缀获得状态报告。默认是<span class=\"string\">\":\"</span>（冒号）。  </span><br><span class=\"line\">              如果指定了这个参数，则状态收集会自动开启；如果没指定，则需要用命令<span class=\"string\">\"stats detail on\"</span>来开启。  </span><br><span class=\"line\">-t       使用的线程数（默认：4）  </span><br><span class=\"line\">-R            每个连接可处理的最大请求数。  </span><br><span class=\"line\">-C            禁用CAS。  </span><br><span class=\"line\">-b            设置后台日志队列的长度（默认：1024）  </span><br><span class=\"line\">-B            绑定协议 - 可能值：ascii,binary,auto（默认）  </span><br><span class=\"line\">-I            重写每个数据页尺寸。调整数据项最大尺寸。  </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看进程</span></span><br><span class=\"line\">ps aux|grep memcached</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"memcached","slug":"Centos/memcached","count":1,"path":"api/categories/Centos/memcached.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"install","slug":"install","count":9,"path":"api/tags/install.json"},{"name":"memcached","slug":"memcached","count":1,"path":"api/tags/memcached.json"}]},{"title":"Centos7 防火墙配置","slug":"Centos7-防火墙配置","date":"2018-12-11T10:25:35.000Z","updated":"2018-12-11T10:25:35.159Z","comments":true,"path":"api/articles/Centos7-防火墙配置.json","excerpt":"","keywords":null,"cover":null,"content":"<p>CentOS 7.0默认使用的是firewall作为防火墙，这里改为iptables防火墙。<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 关闭firewall：</span></span><br><span class=\"line\">systemctl stop firewalld.service <span class=\"comment\">#停止firewall</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">disable</span> firewalld.service <span class=\"comment\">#禁止firewall开机启动</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装iptables防火墙</span></span><br><span class=\"line\">yum install iptables-services <span class=\"comment\">#安装</span></span><br><span class=\"line\">vi /etc/sysconfig/iptables <span class=\"comment\">#编辑防火墙配置文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT  <span class=\"comment\">#加入80端口</span></span><br><span class=\"line\">:wq! <span class=\"comment\">#保存退出</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###最后重启防火墙使配置生效</span></span><br><span class=\"line\">systemctl restart iptables.service </span><br><span class=\"line\"><span class=\"comment\">###设置防火墙开机启动</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> iptables.service</span><br></pre></td></tr></table></figure></div></p>\n","text":"CentOS 7.0默认使用的是firewall作为防火墙，这里改为iptables防火墙。<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>### 关闭fir","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"firewall","slug":"Centos/firewall","count":2,"path":"api/categories/Centos/firewall.json"},{"name":"iptables","slug":"Centos/firewall/iptables","count":1,"path":"api/categories/Centos/firewall/iptables.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"firewall-cmd","slug":"firewall-cmd","count":3,"path":"api/tags/firewall-cmd.json"},{"name":"iptables","slug":"iptables","count":1,"path":"api/tags/iptables.json"}]},{"title":"Centos7上安装启动 tars","slug":"Centos7上安装启动-tars","date":"2018-12-11T09:35:41.000Z","updated":"2018-12-11T09:36:27.916Z","comments":true,"path":"api/articles/Centos7上安装启动-tars.json","excerpt":"","keywords":null,"cover":null,"content":"<h1 id=\"Centos7上安装启动-tars\"><a href=\"#Centos7上安装启动-tars\" class=\"headerlink\" title=\"Centos7上安装启动 tars\"></a>Centos7上安装启动 tars</h1><p>先在Centos的虚拟机上操作:</p>\n<p>首先安装 JDK 和 Mysql</p>\n<p>可以参照之前的文章: <a href=\"https://my.oschina.net/Kxvz/blog/420244\" target=\"_blank\" rel=\"noopener\">https://my.oschina.net/Kxvz/blog/420244</a></p>\n<p>SQL脚本地址: <a href=\"https://github.com/Tencent/Tars/tree/master/cpp/framework/sql\" target=\"_blank\" rel=\"noopener\">https://github.com/Tencent/Tars/tree/master/cpp/framework/sql</a></p>\n<p>安装好了之后进入数据库建库:</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"CMD\"><figure class=\"iseeu highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">## 这里我的数据库帐号密码是: root <span class=\"number\">123456</span></span><br><span class=\"line\">## mysql -u root -p123456</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">create database db_tars;</span><br><span class=\"line\">create database tars_stat;</span><br><span class=\"line\">create database tars_property;</span><br></pre></td></tr></table></figure></div>\n<p>建好库之后就导入db_tars.sql到db_tars库中 (可以参照:<a href=\"https://my.oschina.net/Kxvz/blog/417358\" target=\"_blank\" rel=\"noopener\">https://my.oschina.net/Kxvz/blog/417358</a>)</p>\n<p>数据库方面弄完之后可以开始安装 resin<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 下载</span></span><br><span class=\"line\">wget http://www.caucho.com/download/resin-4.0.49.tar.gz</span><br><span class=\"line\"><span class=\"comment\">## 解压出来</span></span><br><span class=\"line\">tar zxvf resin-4.0.49.tar.gz</span><br></pre></td></tr></table></figure></div></p>\n<p>解压好 resin 后就可以去打包tars了.</p>\n<p>在开发机上操作:</p>\n<p>首先进入 Tars\\web 目录</p>\n<p>修改:src\\main\\resources 下的 app.config.properties 和 tars.conf</p>\n<p>app.config.properties<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tarsweb.datasource.tars.addr=127.0.0.1:3306</span><br><span class=\"line\">tarsweb.datasource.tars.user=root</span><br><span class=\"line\">tarsweb.datasource.tars.pswd=123456</span><br><span class=\"line\"></span><br><span class=\"line\">upload.tgz.path=\\opt\\app\\</span><br></pre></td></tr></table></figure></p>\n<p>tars.conf<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"XML\"><figure class=\"iseeu highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">tars</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">application</span>&gt;</span></span><br><span class=\"line\">\t\t#proxy需要的配置</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">client</span>&gt;</span></span><br><span class=\"line\">\t\t\t#地址</span><br><span class=\"line\">\t\t\tlocator = tars.tarsregistry.QueryObj@tcp -h 127.0.0.1 -p 17890</span><br><span class=\"line\">\t\t\tsync-invoke-timeout = 20000</span><br><span class=\"line\">\t\t\t#最大超时时间(毫秒)</span><br><span class=\"line\">\t\t\tmax-invoke-timeout = 60000</span><br><span class=\"line\">\t\t\t#刷新端口时间间隔(毫秒)</span><br><span class=\"line\">\t\t\trefresh-endpoint-interval = 300000</span><br><span class=\"line\">\t\t\t#模块间调用[可选]</span><br><span class=\"line\">\t\t\tstat = tars.tarsstat.StatObj</span><br><span class=\"line\">\t\t\t#网络异步回调线程个数</span><br><span class=\"line\">\t\t\tasyncthread = 3</span><br><span class=\"line\">\t\t\tmodulename = tars.system</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">client</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">application</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">tars</span>&gt;</span></span><br></pre></td></tr></table></figure></div></p>\n<p>完了之后用maven打包:  在Tars\\web目录下使用 cmd 输入: mvn clean install</p>\n<p>打包好了以后可以在Tars\\web\\target 下得到一个 tars.war</p>\n<p>然后把 tars.war 上传到 Centos的虚拟机上 并复制到 resin-4.0.49\\webapps 目录下</p>\n<p>然后进入 resin-4.0.49\\conf 目录中 修改  resin.xml 文件</p>\n<p>把:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"XML\"><figure class=\"iseeu highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">host</span> <span class=\"attr\">id</span>=<span class=\"string\">\"\"</span> <span class=\"attr\">root-directory</span>=<span class=\"string\">\".\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">web-app</span> <span class=\"attr\">id</span>=<span class=\"string\">\"/\"</span> <span class=\"attr\">root-directory</span>=<span class=\"string\">\"webapps/ROOT\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">host</span>&gt;</span></span><br></pre></td></tr></table></figure></div></p>\n<p>改为:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"XML\"><figure class=\"iseeu highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">host</span> <span class=\"attr\">id</span>=<span class=\"string\">\"\"</span> <span class=\"attr\">root-directory</span>=<span class=\"string\">\".\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">web-app</span> <span class=\"attr\">id</span>=<span class=\"string\">\"/\"</span> <span class=\"attr\">document-directory</span>=<span class=\"string\">\"webapps/tars\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">host</span>&gt;</span></span><br></pre></td></tr></table></figure></div></p>\n<p>完成后进进入 resin-4.0.49\\bin 目录中:</p>\n<p>启动服务:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"CMD\"><figure class=\"iseeu highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./resin.sh <span class=\"built_in\">start</span></span><br></pre></td></tr></table></figure></div></p>\n<p>然后访问: http://{YourServerIP}:8080</p>\n<p>如果访问不了可能是你的Centos端口被关了 可以自己打开端口或者关闭防火墙</p>\n<p>添加端口可以参考 :<a href=\"https://my.oschina.net/Kxvz/blog/900648\" target=\"_blank\" rel=\"noopener\">https://my.oschina.net/Kxvz/blog/900648</a></p>\n<p>关闭防火墙:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"CMD\"><figure class=\"iseeu highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop firewalld</span><br></pre></td></tr></table></figure></div></p>\n<p>如此应该可以访问了::</p>\n<p>![image][<a href=\"https://static.oschina.net/uploads/space/2017/0811/171253_vLMk_2370543.png]\" target=\"_blank\" rel=\"noopener\">https://static.oschina.net/uploads/space/2017/0811/171253_vLMk_2370543.png]</a></p>\n","text":"Centos7上安装启动 tars先在Centos的虚拟机上操作:首先安装 JDK 和 Mysql可以参照之前的文章: https://my.oschina.net/Kxvz/blog/420244SQL脚本地址: https://github.com/Tencent/Tars/","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"tars","slug":"Centos/tars","count":1,"path":"api/categories/Centos/tars.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"tars","slug":"tars","count":1,"path":"api/tags/tars.json"}]},{"title":"Centos7中超简单的Docker入门","slug":"Centos7中超简单的Docker入门","date":"2018-12-11T09:42:13.000Z","updated":"2018-12-11T09:42:13.326Z","comments":true,"path":"api/articles/Centos7中超简单的Docker入门.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 使用yum安装docker</span></span><br><span class=\"line\">yum install docker-io -y</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 直接yum安装，安装成功后查看版本</span></span><br><span class=\"line\">docker -v</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动docker</span></span><br><span class=\"line\">service docker start</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 设置开机启动</span></span><br><span class=\"line\">chkconfig docker on</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 使用腾讯国内镜像源</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"OPTIONS='--registry-mirror=https://mirror.ccs.tencentyun.com'\"</span> &gt;&gt; /etc/sysconfig/docker</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 重新载入 systemd</span></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 重新启动docker</span></span><br><span class=\"line\">service docker restart</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 在Docker中下载一个官方的 CentOS 镜像到本地</span></span><br><span class=\"line\">docker pull centos</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看镜像列表</span></span><br><span class=\"line\">docker images</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 运行一个 Centos镜像为模板生成的容器 并使用 bash shell</span></span><br><span class=\"line\">docker run -it centos /bin/bash</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 在容器中操作不会影响到宿主机</span></span><br><span class=\"line\">mkdir -p /data/simple_docker</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看创建出的目录</span></span><br><span class=\"line\">ls /data</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###退出容器</span></span><br><span class=\"line\"><span class=\"built_in\">exit</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 在宿主机中查看目录 确认没有影响</span></span><br><span class=\"line\">ls /data</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看所有的容器信息</span></span><br><span class=\"line\">docker ps -a</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 保存镜像 需要使用到容器信息中的 CONTAINER_ID 和 IMAGE</span></span><br><span class=\"line\">docker commit -m=<span class=\"string\">\"备注\"</span> CONTAINER_ID IMAGE</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##$ 如:</span></span><br><span class=\"line\">docker commit -m=<span class=\"string\">\"备注\"</span> 5b2ed8fbc835 centos</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"docker","slug":"Centos/docker","count":1,"path":"api/categories/Centos/docker.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"docker","slug":"docker","count":1,"path":"api/tags/docker.json"}]},{"title":"Centos7使用YUM进行install或update出现KeyboardInterrupt错误","slug":"Centos7使用YUM进行install或update出现KeyboardInterrupt错误","date":"2018-12-12T02:08:06.000Z","updated":"2018-12-12T02:08:06.849Z","comments":true,"path":"api/articles/Centos7使用YUM进行install或update出现KeyboardInterrupt错误.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 错误信息</span></span><br><span class=\"line\"></span><br><span class=\"line\">File <span class=\"string\">\"/usr/lib/python2.7/site-packages/urlgrabber/grabber.py\"</span>, line 1517, <span class=\"keyword\">in</span> _do_perform</span><br><span class=\"line\">    raise KeyboardInterrupt</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"comment\">### 解决方案 ###</span></span><br><span class=\"line\"><span class=\"comment\">### 1.打开文件:</span></span><br><span class=\"line\">/usr/lib/python2.7/site-packages/urlgrabber/grabber.py</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 2.在文件的1510行左右找到下面这句代码:</span></span><br><span class=\"line\"><span class=\"keyword\">elif</span> errcode <span class=\"keyword\">in</span> (42, 55, 56):</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 修改为:</span></span><br><span class=\"line\"><span class=\"keyword\">elif</span> errcode == 42:</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 保存退出</span></span><br><span class=\"line\">ESC</span><br><span class=\"line\">:wq</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 重新使用yum</span></span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>### 错误信息<br><br>File \"/","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"yum","slug":"Centos/yum","count":1,"path":"api/categories/Centos/yum.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"yum","slug":"yum","count":1,"path":"api/tags/yum.json"},{"name":"keyboardInterrupt","slug":"keyboardInterrupt","count":1,"path":"api/tags/keyboardInterrupt.json"}]},{"title":"Centos7安装 mongodb-3.2.3","slug":"Centos7安装-mongodb-3-2-3","date":"2018-12-12T02:09:45.000Z","updated":"2018-12-12T02:09:45.980Z","comments":true,"path":"api/articles/Centos7安装-mongodb-3-2-3.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 下载MongoDB</span></span><br><span class=\"line\">wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.2.3.tgz</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 解压</span></span><br><span class=\"line\">tar -zxvf mongodb-linux-x86_64-3.2.3.tgz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 创建需要安装的目录</span></span><br><span class=\"line\">mkdir -p /opt/mongodb</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 复制过去</span></span><br><span class=\"line\">cp -R -n mongodb-linux-x86_64-3.2.3 /opt/mongodb</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 创建存储目录</span></span><br><span class=\"line\">mkdir -p /opt/mongodb/data</span><br><span class=\"line\"></span><br><span class=\"line\">mkdir -p /opt/mongodb/data/db    <span class=\"comment\">### 数据目录</span></span><br><span class=\"line\">mkdir -p /opt/mongodb/data/<span class=\"built_in\">log</span>   <span class=\"comment\">### 日志目录</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 编辑环境变量</span></span><br><span class=\"line\">vi ~/.bashrc</span><br><span class=\"line\"><span class=\"comment\">### 在最后一行下面加上</span></span><br><span class=\"line\">PATH=/opt/mongodb/mongodb-linux-x86_64-3.2.3/bin:<span class=\"variable\">$PATH</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动</span></span><br><span class=\"line\">./mongod --maxConns=100 --port=27017 --bind_ip=127.0.0.1 --dbpath=/opt/mongodb/data/db --logpath=/opt/mongodb/data/<span class=\"built_in\">log</span>/mongodb.log --logappend --fork</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 添加管理员账号</span></span><br><span class=\"line\"><span class=\"comment\"># 使用mongo 命令</span></span><br><span class=\"line\">mongo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 使用 admin 库</span></span><br><span class=\"line\">use admin</span><br><span class=\"line\"><span class=\"comment\"># 添加root账号密码为root</span></span><br><span class=\"line\">db.addUser(<span class=\"string\">\"root\"</span>,<span class=\"string\">\"root\"</span>)</span><br><span class=\"line\"><span class=\"comment\"># 新版Mongodb 添加root账号密码为root</span></span><br><span class=\"line\">db.createUser(&#123;user:<span class=\"string\">'root'</span>,<span class=\"built_in\">pwd</span>:<span class=\"string\">'root'</span>,roles:[<span class=\"string\">'userAdminAnyDatabase'</span>]&#125;)</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"mongodb","slug":"Centos/mongodb","count":1,"path":"api/categories/Centos/mongodb.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"install","slug":"install","count":9,"path":"api/tags/install.json"},{"name":"mongodb","slug":"mongodb","count":1,"path":"api/tags/mongodb.json"}]},{"title":"Centos7安装Samba 共享文件夹","slug":"Centos7安装Samba-共享文件夹","date":"2018-12-12T02:08:37.000Z","updated":"2018-12-12T02:08:37.167Z","comments":true,"path":"api/articles/Centos7安装Samba-共享文件夹.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">###  </span></span><br><span class=\"line\">yum install -y samba samba-client samba-common</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 备份</span></span><br><span class=\"line\">cp /etc/samba/smb.conf /etc/samba/smb.conf_bak</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 配置</span></span><br><span class=\"line\">vi /etc/samba/smb.conf</span><br><span class=\"line\"> </span><br><span class=\"line\">[global]</span><br><span class=\"line\">workgroup = WORKGROUP</span><br><span class=\"line\">server string = Samba Server %v</span><br><span class=\"line\">netbios name = centos</span><br><span class=\"line\">security = user</span><br><span class=\"line\">map to guest = bad user</span><br><span class=\"line\">dns proxy = no</span><br><span class=\"line\"><span class=\"comment\">#============================ Share Definitions ============================== </span></span><br><span class=\"line\">[Anonymous]</span><br><span class=\"line\">path = /samba/anonymous</span><br><span class=\"line\">browsable =yes</span><br><span class=\"line\">writable = yes</span><br><span class=\"line\">guest ok = yes</span><br><span class=\"line\"><span class=\"built_in\">read</span> only = no</span><br><span class=\"line\"> </span><br><span class=\"line\">:wq<span class=\"comment\">#保存并退出</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 设置开机启动 并 启动</span></span><br><span class=\"line\">mkdir -p /samba/anonymous</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> smb.service</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> nmb.service</span><br><span class=\"line\">systemctl restart smb.service</span><br><span class=\"line\">systemctl restart nmb.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 添加防火墙 </span></span><br><span class=\"line\">-A INPUT -p udp -m tcp --dport 137 -j ACCEPT </span><br><span class=\"line\">-A INPUT -p udp -m tcp --dport 138 -j ACCEPT </span><br><span class=\"line\">-A INPUT -p tcp -m tcp --dport 139 -j ACCEPT </span><br><span class=\"line\">-A INPUT -p tcp -m tcp --dport 445 -j ACCEPT </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 或者</span></span><br><span class=\"line\">firewall-cmd --permanent --zone=public --add-service=samba</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"samba","slug":"Centos/samba","count":1,"path":"api/categories/Centos/samba.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"install","slug":"install","count":9,"path":"api/tags/install.json"},{"name":"samba","slug":"samba","count":1,"path":"api/tags/samba.json"}]},{"title":"Centos7安装rabbitmq server 3.6.0","slug":"Centos7安装rabbitmq-server-3-6-0","date":"2018-12-12T02:11:01.000Z","updated":"2018-12-12T02:11:15.317Z","comments":true,"path":"api/articles/Centos7安装rabbitmq-server-3-6-0.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">###假设所有操作在opt目录下进行</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /opt</span><br><span class=\"line\">mkdir apps</span><br><span class=\"line\"><span class=\"built_in\">cd</span> apps</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 下载 RabbitMQ Server</span></span><br><span class=\"line\">wget http://www.rabbitmq.com/releases/rabbitmq-server/v3.6.0/rabbitmq-server-generic-unix-3.6.0.tar.xz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 解压</span></span><br><span class=\"line\">tar -xvJf rabbitmq-server-generic-unix-3.6.0.tar.xz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装 Erlang</span></span><br><span class=\"line\">yum install erlang.x86_64 -y</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 进入RabbitMQ的解压目录中</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> rabbitmq_server-3.6.0</span><br><span class=\"line\"><span class=\"built_in\">cd</span> sbin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动RabbitMQ并在后台之行</span></span><br><span class=\"line\">./rabbitmq-server start -detached</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 添加网站管理插件</span></span><br><span class=\"line\">./rabbitmq-plugins <span class=\"built_in\">enable</span> rabbitmq_management</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 添加RabbitMQ的帐号和密码</span></span><br><span class=\"line\">./rabbitmqctl add_user admin admin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 设定帐号权限(administrator[超级管理员]，monitoring[监控者]，policymaker[策略制定者]，management[普通管理者])</span></span><br><span class=\"line\">./rabbitmqctl set_user_tags admin administrator</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 完成后打开网站并使用帐号密码登录</span></span><br><span class=\"line\"> http://ip:15672</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"rabbitmq","slug":"Centos/rabbitmq","count":1,"path":"api/categories/Centos/rabbitmq.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"install","slug":"install","count":9,"path":"api/tags/install.json"},{"name":"rabbitmq","slug":"rabbitmq","count":1,"path":"api/tags/rabbitmq.json"}]},{"title":"Centos7安装Erlang18.3","slug":"Centos7安装Erlang18-3","date":"2018-12-12T02:07:28.000Z","updated":"2018-12-12T02:07:28.392Z","comments":true,"path":"api/articles/Centos7安装Erlang18-3.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 首先下载资源</span></span><br><span class=\"line\">wget http://erlang.org/download/otp_src_18.3.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 解压</span></span><br><span class=\"line\">tar -xzvf　otp_src_18.3.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装依赖包</span></span><br><span class=\"line\">yum install -y gcc gcc-c++ unixODBC-devel openssl-devel ncurses-devel</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 设定安装位置</span></span><br><span class=\"line\">./configure --prefix=/opt/apps/erlang --without-javac</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装</span></span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 添加环境变量</span></span><br><span class=\"line\">vi ~/.base_profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 加到原有变量之后使用:隔开,&#123;erlang/bin&#125; 是你的安装路径,如:/opt/apps/erlang/bin</span></span><br><span class=\"line\">PATH=<span class=\"variable\">$PATH</span>:&#123;erlang/bin&#125;</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH</span><br><span class=\"line\">:wq</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 使之生效</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.base_profile</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"erlang","slug":"Centos/erlang","count":1,"path":"api/categories/Centos/erlang.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"install","slug":"install","count":9,"path":"api/tags/install.json"},{"name":"erlang","slug":"erlang","count":1,"path":"api/tags/erlang.json"}]},{"title":"Centos安装Java和Mysql","slug":"Centos安装Java和Mysql","date":"2018-12-11T10:14:40.000Z","updated":"2018-12-11T10:15:08.696Z","comments":true,"path":"api/articles/Centos安装Java和Mysql.json","excerpt":"","keywords":null,"cover":null,"content":"<p>首先,下载JDK: <a href=\"jdk-8u45-linux-x64.rpm\">jdk-8u45-linux-x64.rpm</a></p>\n<p>运行安装命令:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum localinstall -y jdk-8u45-linux-x64.rpm</span><br></pre></td></tr></table></figure></div></p>\n<p>安装Mysql:</p>\n<p>下载Mysql: <a href=\"http://repo.mysql.com/\" target=\"_blank\" rel=\"noopener\">mysql-community-release-el6-5.noarch.rpm</a></p>\n<p>运行安装命令:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum localinstall mysql-community-release-el6-5.noarch.rpm</span><br></pre></td></tr></table></figure></div></p>\n<p>更新好了Mysql的安装源后直接执行:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install -y mysql-community-server</span><br></pre></td></tr></table></figure></div></p>\n<p>启动Mysql:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service mysqld start</span><br></pre></td></tr></table></figure></div></p>\n<p>第一次启动需要设置root密码:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqladmin -u root password <span class=\"string\">'yourpassword'</span></span><br></pre></td></tr></table></figure></div></p>\n<p>5.7版本设置密码:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 5.7 安装好后会默认生成一个密码, 需要启动Mysqld服务后可以查看</span></span><br><span class=\"line\"></span><br><span class=\"line\">grep <span class=\"string\">'temporary password'</span> /var/<span class=\"built_in\">log</span>/mysqld.log</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 查看的结果: eHI9*)Tl/zP?</span></span><br><span class=\"line\">A temporary password is generated <span class=\"keyword\">for</span> root@localhost: eHI9*)Tl/zP?</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 修改弱密码验证 避免无法更改为弱密码</span></span><br><span class=\"line\"><span class=\"built_in\">set</span> global validate_password_policy = 0;</span><br><span class=\"line\"><span class=\"built_in\">set</span> global validate_password_length = 4;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 设置新密码</span></span><br><span class=\"line\">SET PASSWORD = PASSWORD(<span class=\"string\">'123456'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 刷新</span></span><br><span class=\"line\">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure></div></p>\n<p>登陆Mysql:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -u root -p[yourpassword]  <span class=\"comment\">### 实际使用中,不需要写[],此处为了区分参数 -p 和 密码</span></span><br></pre></td></tr></table></figure></div></p>\n<p>检查Mysql是否开机启动:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chkconfig --list | grep mysqld   <span class=\"comment\">### 刚安装的都是 off  没有开机启动的</span></span><br></pre></td></tr></table></figure></div></p>\n<p>设置mysql 的开机启动<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chkconfig mysqld on</span><br></pre></td></tr></table></figure></div></p>\n<p>外网访问:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use mysql;</span><br><span class=\"line\"></span><br><span class=\"line\">update user <span class=\"built_in\">set</span> host = <span class=\"string\">'%'</span> <span class=\"built_in\">where</span> user =<span class=\"string\">'root'</span> and password is not null and password != <span class=\"string\">''</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure></div></p>\n<p>Mysql8出现”cache_sha2_passward”的处理<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 更改密码规则 并设置密码为 123456</span></span><br><span class=\"line\"> </span><br><span class=\"line\">ALTER USER <span class=\"string\">'root'</span>@<span class=\"string\">'localhost'</span> IDENTIFIED BY <span class=\"string\">'123456'</span> PASSWORD EXPIRE NEVER;</span><br><span class=\"line\">ALTER USER <span class=\"string\">'root'</span>@<span class=\"string\">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class=\"string\">'123456'</span>;</span><br><span class=\"line\">FLUSH PRIVILEGES;</span><br><span class=\"line\"> </span><br><span class=\"line\">alter user <span class=\"string\">'root'</span>@<span class=\"string\">'localhost'</span> identified by <span class=\"string\">'123456'</span>;</span><br></pre></td></tr></table></figure></div></p>\n","text":"首先,下载JDK: jdk-8u45-linux-x64.rpm运行安装命令:<br>1<br>sudo yum localinstall -y jdk-8u45-linux-x64.rpm<br>安装Mysql:下载Mysql: mysql-community-release-","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"mysql","slug":"Centos/mysql","count":2,"path":"api/categories/Centos/mysql.json"},{"name":"java","slug":"Centos/mysql/java","count":1,"path":"api/categories/Centos/mysql/java.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"install","slug":"install","count":9,"path":"api/tags/install.json"},{"name":"java","slug":"java","count":25,"path":"api/tags/java.json"},{"name":"mysql","slug":"mysql","count":10,"path":"api/tags/mysql.json"}]},{"title":"Centos安装Kafka","slug":"Centos安装Kafka","date":"2018-12-11T09:52:51.000Z","updated":"2018-12-11T09:52:51.182Z","comments":true,"path":"api/articles/Centos安装Kafka.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 首先需要安装好 Scala 2.12</span></span><br><span class=\"line\"><span class=\"comment\">### 下载页面: http://kafka.apache.org/downloads</span></span><br><span class=\"line\"><span class=\"comment\">### 下载地址:https://www.apache.org/dyn/closer.cgi?path=/kafka/0.10.2.0/kafka_2.12-0.10.2.0.tgz</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###　解压出来</span></span><br><span class=\"line\">tar -zxvf kafka_2.12-0.10.2.0.tgz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> kafka_2.12-0.10.2.0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动 (启动之前需要先启动好Zookeeper 并在 server.properties 配置好zookeeper的连接)</span></span><br><span class=\"line\">bin/kafka-server-start.sh -daemon config/server.properties</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 停止</span></span><br><span class=\"line\">bin/kafka-server-stop.sh</span><br></pre></td></tr></table></figure></div>\n<p>配置文件 server.properties 说明:<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 当前机器在集群中的唯一标识，和zookeeper的myid性质一样</span></span><br><span class=\"line\">broker.id=0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Switch to enable topic deletion or not, default value is false</span></span><br><span class=\"line\"><span class=\"comment\">#delete.topic.enable=true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 消息保存的最大值5M</span></span><br><span class=\"line\">message.max.byte=5242880</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># kafka保存消息的副本数，如果一个副本失效了，另一个还可以继续提供服务</span></span><br><span class=\"line\">default.replication.factor=2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 取消息的最大直接数</span></span><br><span class=\"line\">replica.fetch.max.bytes=5242880</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################# Socket Server Settings #############################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 当前kafka对外提供服务的端口默认是9092</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">port</span>=<span class=\"number\">18082</span></span><br><span class=\"line\"></span><br><span class=\"line\">host.name=192.168.99.250</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Hostname and port the broker will advertise to producers and consumers. If not set, </span></span><br><span class=\"line\"><span class=\"comment\"># it uses the value for \"listeners\" if configured.  Otherwise, it will use the value</span></span><br><span class=\"line\"><span class=\"comment\"># returned from java.net.InetAddress.getCanonicalHostName().</span></span><br><span class=\"line\"><span class=\"comment\">#advertised.listeners=PLAINTEXT://your.host.name:9092</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Maps listener names to security protocols, the default is for them to be the same. See the config documentation for more details</span></span><br><span class=\"line\"><span class=\"comment\">#listener.security.protocol.map=PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 这个是borker进行网络处理的线程数</span></span><br><span class=\"line\">num.network.threads=3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 这个是borker进行I/O处理的线程数</span></span><br><span class=\"line\">num.io.threads=8</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 发送缓冲区buffer大小，数据不是一下子就发送的，先回存储到缓冲区了到达一定的大小后在发送，能提高性能</span></span><br><span class=\"line\">socket.send.buffer.bytes=102400</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># kafka接收缓冲区大小，当数据到达一定大小后在序列化到磁盘</span></span><br><span class=\"line\">socket.receive.buffer.bytes=102400</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 这个参数是向kafka请求消息或者向kafka发送消息的请请求的最大数，这个值不能超过java的堆栈大小</span></span><br><span class=\"line\">socket.request.max.bytes=104857600</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################# Log Basics #############################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 消息存放的目录，这个目录可以配置为“，”逗号分割的表达式，上面的num.io.threads要大于这个目录的个数这个目录，如果配置多个目录，新创建的topic他把消息持久化的地方是，当前以逗号分割的目录中，那个分区数最少就放那一个</span></span><br><span class=\"line\">log.dirs=/tmp/kafka-logs</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 默认的分区数，一个topic默认1个分区数</span></span><br><span class=\"line\">num.partitions=1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 每个数据目录用来日志恢复的线程数</span></span><br><span class=\"line\">num.recovery.threads.per.data.dir=1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################# Log Flush Policy #############################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 是否启用log压缩，一般不用启用，启用的话可以提高性能</span></span><br><span class=\"line\">log.cleaner.enable=false </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 当消息数量到达10000时强制写入到磁盘 (一般不建议使用这个选项)</span></span><br><span class=\"line\"><span class=\"comment\">#log.flush.interval.messages=10000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 强制写入磁盘的间隔时间 (一般不建议使用这个选项)</span></span><br><span class=\"line\"><span class=\"comment\">#log.flush.interval.ms=1000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################# Log Retention Policy #############################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 默认消息的最大持久化时间，168小时，7天</span></span><br><span class=\"line\">log.retention.hours=168</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 这个参数是：因为kafka的消息是以追加的形式落地到文件，当超过这个值的时候，kafka会新起一个文件</span></span><br><span class=\"line\">log.segment.bytes=1073741824</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 每隔300000毫秒去检查上面配置的log失效时间（log.retention.hours=168 ），到目录查看是否有过期的消息如果有，删除</span></span><br><span class=\"line\">log.retention.check.interval.ms=300000</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################# Zookeeper #############################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># zookeeper的连接配置</span></span><br><span class=\"line\">zookeeper.connect=192.168.101.251:2181,192.168.10.252:2181,192.168.10.253:2181,192.168.10.254:2181</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 访问zookeeper的超时时间</span></span><br><span class=\"line\">zookeeper.connection.timeout.ms=6000</span><br></pre></td></tr></table></figure></p>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>### 首先需要安装好 Scala 2.12<br>### 下载页面: http://kafka.apache.org/downl","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"kafka","slug":"Centos/kafka","count":1,"path":"api/categories/Centos/kafka.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"kafka","slug":"kafka","count":1,"path":"api/tags/kafka.json"}]},{"title":"Centos常用操作记录","slug":"Centos常用操作记录","date":"2018-12-11T10:39:21.000Z","updated":"2018-12-11T10:39:21.309Z","comments":true,"path":"api/articles/Centos常用操作记录.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 重新设置nohup的输出文件</span></span><br><span class=\"line\">nohup <span class=\"built_in\">command</span> &gt; myout.file 2&gt;&amp;1 &amp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 修改文件夹以及文件夹下的子文件权限</span></span><br><span class=\"line\">chmod 755 files/ -R</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 设置开机启动服务 ssh</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> sshd.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 禁用开机启动服务  firewalld</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">disable</span> firewalld.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### Centos 解压 *.tar.xz 文件 </span></span><br><span class=\"line\">tar -xvJf *.tar.xz</span><br><span class=\"line\"><span class=\"comment\">### 如果这条命令出现错误:</span></span><br><span class=\"line\"><span class=\"comment\">### tar (child): xz: Cannot exec: No such file or directory</span></span><br><span class=\"line\"><span class=\"comment\">### tar (child): Error is not recoverable: exiting now</span></span><br><span class=\"line\"><span class=\"comment\">### 请安装:   yum install xz -y</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看ssh服务</span></span><br><span class=\"line\">systemctl list-unit-files | grep ssh</span><br><span class=\"line\"><span class=\"comment\">###启动SSH服务</span></span><br><span class=\"line\">systemctl start sshd.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装常用工具 如: iostat</span></span><br><span class=\"line\">yum install sysstat -y</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### Centos 解压 *.tar.gz 文件 </span></span><br><span class=\"line\">tar -xzvf *.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 解压 *.tar 文件</span></span><br><span class=\"line\">tar -xvf *.tar</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 解压 *.tar.bz2 文件</span></span><br><span class=\"line\">tar -xjvf *.tar.bz2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 解压 *.tar.Z 文件</span></span><br><span class=\"line\">tar -xZvf *.tar.Z</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看连接数</span></span><br><span class=\"line\">netstat -nat |awk <span class=\"string\">'&#123;print $6&#125;'</span>|sort|uniq -c|sort -rn</span><br><span class=\"line\"></span><br><span class=\"line\">netstat -n | awk <span class=\"string\">'/^tcp/ &#123;++S[$NF]&#125; END &#123;for(a in S) print a, S[a]&#125;'</span></span><br><span class=\"line\"></span><br><span class=\"line\">netstat -ano | grep 80 | grep -v EST | less</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看80端口的连接数</span></span><br><span class=\"line\">netstat -nat|grep -i <span class=\"string\">\"80\"</span>|wc -l</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装常用的工具</span></span><br><span class=\"line\">yum install -y gcc gcc-c++ openssl-devel unixODBC-devel</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### ==单用户修改密码================================================</span></span><br><span class=\"line\"><span class=\"comment\">### Centos7 忘记密码 单用户修改</span></span><br><span class=\"line\"><span class=\"comment\">### 将ro改为rw init=/sysroot/bin/sh</span></span><br><span class=\"line\"><span class=\"comment\">### 进入chroot</span></span><br><span class=\"line\">chroot /sysroot</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 重置密码</span></span><br><span class=\"line\">passwd root</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 更新系统信息</span></span><br><span class=\"line\">touch /.autorelabel</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 退出chroot</span></span><br><span class=\"line\"><span class=\"built_in\">exit</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 重启</span></span><br><span class=\"line\">init 6</span><br><span class=\"line\"><span class=\"comment\">### ==单用户修改密码结束================================================</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###Centos7 停用防火墙</span></span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看mongo程序的监听端口</span></span><br><span class=\"line\">netstat -tnlp | grep mongod</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动Memcached服务</span></span><br><span class=\"line\">./memcached -d -m 256 -u root -p 11211 -c 1024 –P /tmp/memcached.pid</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 后台启动Redis服务</span></span><br><span class=\"line\">./redis-server &amp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 后台启动RabbitMQ服务</span></span><br><span class=\"line\">./rabbitmq-server start -detached</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动Solr服务</span></span><br><span class=\"line\">./solr start -p 8984</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动MongoDB服务</span></span><br><span class=\"line\">./mongod --maxConns=100 --port=27017 --bind_ip=127.0.0.1 --dbpath=/opt/mongodb/data/db --logpath=/opt/mongodb/data/<span class=\"built_in\">log</span>/mongodb.log --logappend --fork</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"bash","slug":"Centos/bash","count":1,"path":"api/categories/Centos/bash.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"bash","slug":"bash","count":1,"path":"api/tags/bash.json"}]},{"title":"Centos 设置 时间同步","slug":"Centos-设置-时间同步","date":"2018-12-11T10:18:24.000Z","updated":"2018-12-11T10:18:24.841Z","comments":true,"path":"api/articles/Centos-设置-时间同步.json","excerpt":"","keywords":null,"cover":null,"content":"<p>安装ntpdate<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y ntpdate</span><br></pre></td></tr></table></figure></div></p>\n<p>停止ntpdate服务<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/init.d/ntpdate stop</span><br></pre></td></tr></table></figure></div></p>\n<p>手动同步时间<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/sbin/ntpdate ntp.fudan.edu.cn</span><br></pre></td></tr></table></figure></div></p>\n<p>设定定时执行<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -e</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 在出现的输入框中输入下面的内容, 1440 表示 一天 1440分钟</span></span><br><span class=\"line\">*/1440 * * * * /usr/sbin/ntpdate ntp.fudan.edu.cn</span><br></pre></td></tr></table></figure></div></p>\n<p>查看定时任务是否成功<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab  -l</span><br></pre></td></tr></table></figure></div></p>\n","text":"安装ntpdate<br>1<br>yum install -y ntpdate<br>停止ntpdate服务<br>1<br>/etc/init.d/ntpdate stop<br>手动同步时间<br>1<br>/usr/sbin/ntpdate ntp.fudan.edu.c","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"ntp","slug":"Centos/ntp","count":1,"path":"api/categories/Centos/ntp.json"},{"name":"crontab","slug":"Centos/ntp/crontab","count":1,"path":"api/categories/Centos/ntp/crontab.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"ntp","slug":"ntp","count":1,"path":"api/tags/ntp.json"},{"name":"crontab","slug":"crontab","count":1,"path":"api/tags/crontab.json"}]},{"title":"Centos挂载硬盘 ","slug":"Centos挂载硬盘","date":"2018-12-11T10:11:21.000Z","updated":"2018-12-11T10:11:21.175Z","comments":true,"path":"api/articles/Centos挂载硬盘.json","excerpt":"","keywords":null,"cover":null,"content":"<p>1.首先进到 /sbin 里面 执行 fdisk 查看数据盘是否存在,并记下路径 如 :<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"CMD\"><figure class=\"iseeu highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fdisk -l    ### 查看需要挂载的硬盘 如:/dev/vdb</span><br></pre></td></tr></table></figure></div></p>\n<p> 2.格式化数据盘(请保存好重要数据):<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkfs.ext4  /dev/vdb</span><br></pre></td></tr></table></figure></div></p>\n<p> 3.挂载分区到指定的文件夹下:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /data           <span class=\"comment\">### 创建文件夹</span></span><br><span class=\"line\">mount /dev/vdb /data   <span class=\"comment\">### 挂载硬盘到此文件夹下</span></span><br></pre></td></tr></table></figure></div></p>\n<p> 4.编辑/etc/fstab 文件,重启自动挂载<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/fstab</span><br></pre></td></tr></table></figure></div></p>\n<p>在文件最后添加<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/dev/vdb    /mnt    ext4    defaults    0 0</span><br></pre></td></tr></table></figure></div></p>\n<p> Esc  -&gt;   :wq  </p>\n<p>保存退出,Reboot 重启…</p>\n","text":"1.首先进到 /sbin 里面 执行 fdisk 查看数据盘是否存在,并记下路径 如 :<br>1<br>fdisk -l    ### 查看需要挂载的硬盘 如:/dev/vdb<br> 2.格式化数据盘(请保存好重要数据):<br>1<br>mkfs.ext4  /dev/vd","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"mount","slug":"Centos/mount","count":2,"path":"api/categories/Centos/mount.json"},{"name":"disk","slug":"Centos/mount/disk","count":1,"path":"api/categories/Centos/mount/disk.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"mount","slug":"mount","count":2,"path":"api/tags/mount.json"},{"name":"disk","slug":"disk","count":4,"path":"api/tags/disk.json"}]},{"title":"Centos转移Mysql的数据位置","slug":"Centos转移Mysql的数据位置","date":"2018-12-11T10:17:11.000Z","updated":"2018-12-11T10:17:11.470Z","comments":true,"path":"api/articles/Centos转移Mysql的数据位置.json","excerpt":"","keywords":null,"cover":null,"content":"<p>首先，假设我们需要把Mysql的数据存储位置转到到  /data 下面</p>\n<p>第一步：<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service mysqld stop</span><br></pre></td></tr></table></figure></div></p>\n<p>第二步：<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 备份原来的 mysql</span></span><br><span class=\"line\"></span><br><span class=\"line\">cp -a /var/lib/mysql /var/lib/mysql_bak</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 转移 mysql</span></span><br><span class=\"line\">cp -a /var/lib/mysql /data/</span><br></pre></td></tr></table></figure></div></p>\n<p>转移完成后我们需要修改一些参数让mysql能使用新的地址：<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 备份原来的文件配置信息</span></span><br><span class=\"line\">cp -a /etc/my.cnf /etc/my.cnf_bak</span><br><span class=\"line\"><span class=\"comment\">### 修改原来的配置文件</span></span><br><span class=\"line\">vi /etc/my.cnf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 找到 datadir 并把值修改为 ：  datadir=/data/mysql</span></span><br><span class=\"line\"><span class=\"comment\">### 找到 socket 并把值修改为 ：   socket=/data/mysql/mysql.sock</span></span><br></pre></td></tr></table></figure></div></p>\n<p>修改第二个配置文件：<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 备份原来的文件信息</span></span><br><span class=\"line\">cp -a /etc/init.d/mysqld /etc/init.d/mysqld_bak</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 修改原来的文件信息</span></span><br><span class=\"line\">vi /etc/init.d/mysqld</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 找到 get_mysql_option mysqld datadir </span></span><br><span class=\"line\"><span class=\"comment\">### 并把值修改为 ： get_mysql_option mysqld datadir \"/data/mysql\"</span></span><br><span class=\"line\"><span class=\"comment\">### 找到 datadir 并把值修改为 ： datadir=\"/data/mysql\"</span></span><br></pre></td></tr></table></figure></div></p>\n<p>配置文件修改完成后建立mysql sock 的软连接<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 进入原来的mysql目录</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /ver/lib/mysql</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 移除里面的内容</span></span><br><span class=\"line\">rm -rf *</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 建立 mysql.sock 的软连接</span></span><br><span class=\"line\">ln -s /data/mysql/mysql.sock /var/lib/mysql/mysql.sock</span><br></pre></td></tr></table></figure></div></p>\n<p>启动 mysql<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service mysqld start</span><br></pre></td></tr></table></figure></div></p>\n<p>如果出现权限类的问题：<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 修改权限错误的文件或文件夹 如修改：/data/mysql 的文件夹权限命令</span></span><br><span class=\"line\">chcon -R -t mysqld_db_t /data/mysql</span><br></pre></td></tr></table></figure></div></p>\n<p>如果修改了相应的文件夹权限还是无法启动</p>\n<p>修改系统的权限验证：<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/selinux/config</span><br><span class=\"line\"><span class=\"comment\">### 找到 SELINUX 并把值修改为： SELINUX=disabled</span></span><br><span class=\"line\">Esc  :wq</span><br><span class=\"line\"><span class=\"comment\">### 修改完成保存后重启系统</span></span><br><span class=\"line\">reboot</span><br></pre></td></tr></table></figure></div></p>\n<p>==注意：以上操作如果是在生产环境中请谨慎操作。。==</p>\n","text":"首先，假设我们需要把Mysql的数据存储位置转到到  /data 下面第一步：<br>1<br>service mysqld stop<br>第二步：<br>1<br>2<br>3<br>4<br>5<br>6<br>### 备份原来的 mysql<br><br>cp -a /v","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"mysql","slug":"Centos/mysql","count":2,"path":"api/categories/Centos/mysql.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"mysql","slug":"mysql","count":10,"path":"api/tags/mysql.json"}]},{"title":"Linux设置Java环境变量","slug":"Linux设置Java环境变量","date":"2018-12-11T10:21:45.000Z","updated":"2018-12-11T10:21:45.114Z","comments":true,"path":"api/articles/Linux设置Java环境变量.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">###Linux下使用”export“命令设定环境变量 一次性的，退出shell则消失</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/opt/app/jdk1.7.0_51</span><br><span class=\"line\"><span class=\"built_in\">export</span> CLASSPATH=.:<span class=\"variable\">$JAVA_HOME</span>/lib</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$JAVA_HOME</span>/bin:<span class=\"variable\">$cd</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 添加针对当前用户的永久环境变量，先进入根目录： cd ~</span></span><br><span class=\"line\"><span class=\"comment\">### 查看隐藏文件命令  ll -al</span></span><br><span class=\"line\"><span class=\"comment\">### 通过 .bash_profile 保存</span></span><br><span class=\"line\"></span><br><span class=\"line\">vi ~/.bash_profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 找到 PATH = *****</span></span><br><span class=\"line\"><span class=\"comment\">### 加入以下代码</span></span><br><span class=\"line\"></span><br><span class=\"line\">PATH=&#123;原来已经存在的内容&#125;:/opt/app/jdk1.7.0_51/bin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 配置JAVA_HOME</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/opt/app/jdk1.7.0_51/bin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 保存退出 Esc :wq</span></span><br><span class=\"line\"><span class=\"comment\">### 让新的环境变量生效命令  [root@localhost ~]#. .bash_profile</span></span><br><span class=\"line\"><span class=\"comment\">### 查看环境变量命令        [root@localhost ~]# env</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 附录Win</span></span><br><span class=\"line\">JAVA_HOME = E:\\Program Files\\Java\\jdk1.8.0_73;</span><br><span class=\"line\">CLASSPATH = .;%JAVA_HOME%\\lib;%JAVA_HOME%\\lib\\tools.jar;</span><br><span class=\"line\">PATH = ;%JAVA_HOME%\\bin;%JAVA_HOME%\\jre\\bin;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 全部用户可以用需要修改 /etc/profile 在最后加上:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/opt/app/jdk1.7.0_51</span><br><span class=\"line\"><span class=\"built_in\">export</span> CLASSPATH=.:<span class=\"variable\">$JAVA_HOME</span>/lib</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"java","slug":"Centos/java","count":2,"path":"api/categories/Centos/java.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"java","slug":"java","count":25,"path":"api/tags/java.json"},{"name":"path","slug":"path","count":1,"path":"api/tags/path.json"}]},{"title":"Linux释放内存的命令","slug":"Linux释放内存的命令","date":"2018-12-11T10:38:49.000Z","updated":"2018-12-11T10:38:49.545Z","comments":true,"path":"api/articles/Linux释放内存的命令.json","excerpt":"","keywords":null,"cover":null,"content":"<p>Linux释放内存的命令：</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">##强制将内存中的文件缓冲内容写到磁盘</span></span><br><span class=\"line\">sync</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##手动释放Linux中的所有缓存</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> 3 &gt; /proc/sys/vm/drop_caches</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##释放完内存后改回去让系统重新自动分配内存</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> 0 &gt;/proc/sys/vm/drop_caches</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##=================================</span></span><br><span class=\"line\">drop_caches值的含义：</span><br><span class=\"line\">0：不释放（系统默认值）</span><br><span class=\"line\">1：释放页缓存</span><br><span class=\"line\">2：释放dentries和inodes</span><br><span class=\"line\">3：释放所有缓存</span><br></pre></td></tr></table></figure></div>\n","text":"Linux释放内存的命令：1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>##强制将内存中的文件缓冲内容写到磁盘<br>sync<br><br>##手动释放Linux","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"sync","slug":"Centos/sync","count":1,"path":"api/categories/Centos/sync.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"sync","slug":"sync","count":1,"path":"api/tags/sync.json"}]},{"title":"Linux安装Redis,并用Java进行操作","slug":"Linux安装Redis-并用Java进行操作","date":"2018-12-11T10:32:02.000Z","updated":"2018-12-11T10:32:02.380Z","comments":true,"path":"api/articles/Linux安装Redis-并用Java进行操作.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 进入目录</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /opt/app/redis</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 下载Redis</span></span><br><span class=\"line\">wget http://download.redis.io/releases/redis-3.0.7.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 改权限?</span></span><br><span class=\"line\">chmod -R 777 redis-3.0.5.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 解压</span></span><br><span class=\"line\">tar xzf redis-3.0.5.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 进入Redis的目录</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> redis-3.0.5</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 安装到指定目录</span></span><br><span class=\"line\">make MALLOC=libc PREFIX=/opt/app/redis install </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 如果安装失败,缺少GCC 则需要先安装 GCC</span></span><br><span class=\"line\">yum install -y gcc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 安装成功后进入到 /opt/app/redis/cont/bin 目录可以看到如下文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">redis-benchmark</span><br><span class=\"line\">redis-check-aof</span><br><span class=\"line\">redis-check-dump</span><br><span class=\"line\">redis-cli</span><br><span class=\"line\">redis-sentinel -&gt; redis-server</span><br><span class=\"line\">redis-server</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 后台启动Redis服务</span></span><br><span class=\"line\">./redis-server &amp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 测试连接</span></span><br><span class=\"line\">./redis-cli</span><br><span class=\"line\"></span><br><span class=\"line\">127.0.0.1:6379&gt; <span class=\"built_in\">set</span> a b</span><br><span class=\"line\">OK</span><br><span class=\"line\">127.0.0.1:6379&gt; get a</span><br><span class=\"line\"><span class=\"string\">\"b\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 到此Redis的安装和启动完成</span></span><br></pre></td></tr></table></figure></div>\n<p>测试Java使用Redis<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"XML\"><figure class=\"iseeu highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 使用Maven引入支持的Jar</span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span>  </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>redis.clients<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span>  </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jedis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span>  </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.8.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span>  </span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div></p>\n <div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVA\"><figure class=\"iseeu highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//测试方法</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] params)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">       Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">\"127.0.0.1\"</span>);</span><br><span class=\"line\">       jedis.set(<span class=\"string\">\"a\"</span>, <span class=\"string\">\"b....\"</span>);</span><br><span class=\"line\">       System.out.println(<span class=\"string\">\"================================================\"</span>);</span><br><span class=\"line\">       System.out.println(jedis.get(<span class=\"string\">\"a\"</span>));</span><br><span class=\"line\">       System.out.println(<span class=\"string\">\"================================================\"</span>);</span><br><span class=\"line\">       jedis.rename(<span class=\"string\">\"a\"</span>, <span class=\"string\">\"a1\"</span>);</span><br><span class=\"line\">       System.out.println(jedis.get(<span class=\"string\">\"a\"</span>));</span><br><span class=\"line\">       System.out.println(<span class=\"string\">\"================================================\"</span>);</span><br><span class=\"line\">       System.out.println(jedis.get(<span class=\"string\">\"a1\"</span>));</span><br><span class=\"line\">       System.out.println(<span class=\"string\">\"================================================\"</span>);</span><br><span class=\"line\">       jedis.del(<span class=\"string\">\"a1\"</span>);</span><br><span class=\"line\">       System.out.println(jedis.get(<span class=\"string\">\"a1\"</span>));</span><br><span class=\"line\">       System.out.println(<span class=\"string\">\"================================================\"</span>);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></div>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//  运行结果</span><br><span class=\"line\"></span><br><span class=\"line\">================================================</span><br><span class=\"line\">b....</span><br><span class=\"line\">================================================</span><br><span class=\"line\">null</span><br><span class=\"line\">================================================</span><br><span class=\"line\">b....</span><br><span class=\"line\">================================================</span><br><span class=\"line\">null</span><br><span class=\"line\">================================================</span><br></pre></td></tr></table></figure></div>","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"java","slug":"Centos/java","count":2,"path":"api/categories/Centos/java.json"},{"name":"redis","slug":"Centos/java/redis","count":1,"path":"api/categories/Centos/java/redis.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"java","slug":"java","count":25,"path":"api/tags/java.json"},{"name":"redis","slug":"redis","count":3,"path":"api/tags/redis.json"}]},{"title":"SSH 内网穿透","slug":"SSH-内网穿透","date":"2018-12-11T09:27:30.000Z","updated":"2018-12-11T09:27:30.268Z","comments":true,"path":"api/articles/SSH-内网穿透.json","excerpt":"","keywords":null,"cover":null,"content":"<h1 id=\"SSH-内网穿透\"><a href=\"#SSH-内网穿透\" class=\"headerlink\" title=\"SSH 内网穿透\"></a>SSH 内网穿透</h1><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"CMD\"><figure class=\"iseeu highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">## 权限</span><br><span class=\"line\">chmod <span class=\"number\">600</span> ~/.ssh/id_rsd</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">## 转发服务器上的<span class=\"number\">891</span>端口的请求到本地 <span class=\"number\">88</span>端口上</span><br><span class=\"line\">ssh -C -f -N -g -v -R <span class=\"number\">891</span>:<span class=\"number\">127</span>.<span class=\"number\">0</span>.<span class=\"number\">0</span>.<span class=\"number\">1</span>:<span class=\"number\">88</span> root@<span class=\"number\">110</span>.<span class=\"number\">110</span>.<span class=\"number\">110</span>.<span class=\"number\">110</span> -p <span class=\"number\">1234</span> -i ~/.ssh/id_rsd</span><br></pre></td></tr></table></figure></div>\n","text":"SSH 内网穿透1<br>2<br>3<br>4<br>5<br>6<br>## 权限<br>chmod 600 ~/.ssh/id_rsd<br><br><br>## 转发服务器上的891端口的请求到本地 88端口上<br>ssh -C -f -N -g -v -R 891:1","link":"","raw":null,"photos":[],"categories":[{"name":"centos","slug":"centos","count":1,"path":"api/categories/centos.json"},{"name":"ssh","slug":"centos/ssh","count":1,"path":"api/categories/centos/ssh.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"ssh","slug":"ssh","count":2,"path":"api/tags/ssh.json"},{"name":"nat","slug":"nat","count":2,"path":"api/tags/nat.json"}]},{"title":"在Centos7上搭建Ngrok服务","slug":"在Centos7上搭建Ngrok服务","date":"2018-12-11T09:42:59.000Z","updated":"2018-12-11T09:42:59.246Z","comments":true,"path":"api/articles/在Centos7上搭建Ngrok服务.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 首先先装好一些编译需要使用的工具</span></span><br><span class=\"line\">yum -y install zlib-devel openssl-devel perl hg cpio expat-devel gettext-devel curl curl-devel </span><br><span class=\"line\">perl-ExtUtils-MakeMaker hg wget gcc gcc-c++</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装好Git 最好是1.8+</span></span><br><span class=\"line\">yum install -y git</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装 Go 一定注意要找 1.4.3版本的 下载地址:https://golang.org/dl/   </span></span><br><span class=\"line\">wget https://storage.googleapis.com/golang/go1.4.3.linux-amd64.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">tar -C /usr/<span class=\"built_in\">local</span> -xzf go1.4.3.linux-amd64.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 添加Go的环境变量 首先打开 profile 在最后加上 export PATH=$PATH:/usr/local/go/bin</span></span><br><span class=\"line\"></span><br><span class=\"line\">vi /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$PATH</span>:/usr/<span class=\"built_in\">local</span>/go/bin</span><br><span class=\"line\"></span><br><span class=\"line\">go version</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 下载 ngrok 源码</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/inconshreveable/ngrok.git</span><br><span class=\"line\"><span class=\"built_in\">export</span> GOPATH=/usr/<span class=\"built_in\">local</span>/ngrok/</span><br><span class=\"line\"><span class=\"built_in\">export</span> NGROK_DOMAIN=<span class=\"string\">\"[此处填写你的域名:如: baidu.com]\"</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ngrok</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 生成SSL证书 用于 Ngrok 服务端和客户端通信认证使用</span></span><br><span class=\"line\"></span><br><span class=\"line\">openssl genrsa -out rootCA.key 2048</span><br><span class=\"line\">openssl req -x509 -new -nodes -key rootCA.key -subj <span class=\"string\">\"/CN=<span class=\"variable\">$NGROK_DOMAIN</span>\"</span> -days 5000 -out rootCA.pem</span><br><span class=\"line\">openssl genrsa -out server.key 2048</span><br><span class=\"line\">openssl req -new -key server.key -subj <span class=\"string\">\"/CN=<span class=\"variable\">$NGROK_DOMAIN</span>\"</span> -out server.csr</span><br><span class=\"line\">openssl x509 -req -<span class=\"keyword\">in</span> server.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out server.crt -days 5000</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 复制证书到 tls下</span></span><br><span class=\"line\"></span><br><span class=\"line\">\\cp -r rootCA.pem assets/client/tls/ngrokroot.crt</span><br><span class=\"line\">\\cp -r server.crt assets/server/tls/snakeoil.crt</span><br><span class=\"line\">\\cp -r server.key assets/server/tls/snakeoil.key</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 国内的网络环境需要改一点代码</span></span><br><span class=\"line\"></span><br><span class=\"line\">vi /usr/<span class=\"built_in\">local</span>/ngrok/src/ngrok/<span class=\"built_in\">log</span>/logger.go</span><br><span class=\"line\"><span class=\"built_in\">log</span> <span class=\"string\">\"github.com/keepeye/log4go\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 编译Server端 注意替换 GOOS 和 GOARCH , 具体的值可以通过命令 go env 查看</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/go/src</span><br><span class=\"line\">GOOS=linux GOARCH=amd64 ./make.bash</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/ngrok/</span><br><span class=\"line\">GOOS=linux GOARCH=amd64 make release-server</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 编译客户端</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/go/src</span><br><span class=\"line\">GOOS=linux GOARCH=amd64 ./make.bash</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/ngrok/</span><br><span class=\"line\">GOOS=linux GOARCH=amd64 make release-client</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 服务端启动</span></span><br><span class=\"line\"></span><br><span class=\"line\">/usr/<span class=\"built_in\">local</span>/ngrok/bin/ngrokd -domain=<span class=\"string\">\"<span class=\"variable\">$NGROK_DOMAIN</span>\"</span> -httpAddr=<span class=\"string\">\":80\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 客户端配置文件</span></span><br><span class=\"line\">server_addr: <span class=\"string\">\"ngrok.sunnyos.com:4443\"</span></span><br><span class=\"line\">trust_host_root_certs: <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动客户端</span></span><br><span class=\"line\">./ngrok -config=./ngrok.cfg -subdomain=blog 80</span><br><span class=\"line\"></span><br><span class=\"line\">setsid ./ngrok -config=./ngrok.cfg -subdomain=<span class=\"built_in\">test</span> 80 <span class=\"comment\">#在linux下如果想后台运行</span></span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"ngrok","slug":"Centos/ngrok","count":1,"path":"api/categories/Centos/ngrok.json"},{"name":"nat","slug":"Centos/ngrok/nat","count":1,"path":"api/categories/Centos/ngrok/nat.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"nat","slug":"nat","count":2,"path":"api/tags/nat.json"},{"name":"ngrok","slug":"ngrok","count":1,"path":"api/tags/ngrok.json"}]},{"title":"在Centos7中使用firewall添加端口","slug":"在Centos7中使用firewall添加端口","date":"2018-12-11T09:04:42.000Z","updated":"2018-12-11T09:04:42.120Z","comments":true,"path":"api/articles/在Centos7中使用firewall添加端口.json","excerpt":"","keywords":null,"cover":null,"content":"<h1 id=\"在Centos7中使用firewall添加端口\"><a href=\"#在Centos7中使用firewall添加端口\" class=\"headerlink\" title=\"在Centos7中使用firewall添加端口\"></a>在Centos7中使用firewall添加端口</h1><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 查看端口列表</span></span><br><span class=\"line\">firewall-cmd --zone=public --list-ports</span><br><span class=\"line\">firewall-cmd --zone=dmz --list-ports</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 添加80端口</span></span><br><span class=\"line\">firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class=\"line\">firewall-cmd --zone=public --add-port=80/udp --permanent</span><br><span class=\"line\">firewall-cmd --zone=dmz --add-port=80/tcp --permanent</span><br><span class=\"line\">firewall-cmd --zone=dmz --add-port=80/udp --permanent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 使添加的端口生效</span></span><br><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure></div>\n","text":"在Centos7中使用firewall添加端口1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>### 查看端口列表<br>firewall-cmd --zone=public --list-ports<","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"firewall","slug":"Centos/firewall","count":2,"path":"api/categories/Centos/firewall.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"firewall-cmd","slug":"firewall-cmd","count":3,"path":"api/tags/firewall-cmd.json"},{"name":"port","slug":"port","count":3,"path":"api/tags/port.json"}]},{"title":"在CentOS上制作CA证书并绑定到Nginx上","slug":"在CentOS上制作CA证书并绑定到Nginx上","date":"2018-12-12T02:02:06.000Z","updated":"2018-12-12T02:02:06.603Z","comments":true,"path":"api/articles/在CentOS上制作CA证书并绑定到Nginx上.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"CMD\"><figure class=\"iseeu highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//创建根证书密钥文件</span><br><span class=\"line\">openssl genrsa -des3 -out test.key</span><br><span class=\"line\">//创建根证书的申请文件</span><br><span class=\"line\">openssl req -new -key test.key -out test.csr</span><br><span class=\"line\">//创建一个自当前日期起为期十年的根证书</span><br><span class=\"line\">openssl x509 -req -days <span class=\"number\">3650</span> -sha1 -extensions v3_ca -signkey test.key -<span class=\"keyword\">in</span> test.csr -out test.crt</span><br><span class=\"line\"></span><br><span class=\"line\">//创建服务器证书密钥</span><br><span class=\"line\">openssl genrsa -des3 -out server.key <span class=\"number\">2048</span></span><br><span class=\"line\">//创建服务器证书的申请文件</span><br><span class=\"line\">openssl req -new -key server.key -out server.csr</span><br><span class=\"line\">//创建自当前日期起有效期为期两年的服务器证书</span><br><span class=\"line\">openssl x509 -req -days <span class=\"number\">730</span> -sha1 -extensions v3_req -CA test.crt -CAkey test.key -CAserial test.srl -CAcreateserial -<span class=\"keyword\">in</span> server.csr -out server.crt</span><br><span class=\"line\"></span><br><span class=\"line\">//创建客户端证书密钥文件</span><br><span class=\"line\">openssl genrsa -des3 -out client.key <span class=\"number\">2048</span></span><br><span class=\"line\">//创建客户端证书的申请文件</span><br><span class=\"line\">openssl req -new -key client.key -out client.csr</span><br><span class=\"line\">//创建一个自当前日期起有效期为两年的客户端证书</span><br><span class=\"line\">openssl x509 -req -days <span class=\"number\">730</span> -sha1 -extensions v3_req -CA test.crt -CAkey test.key -CAserial test.srl -CAcreateserial -<span class=\"keyword\">in</span> client.csr -out client.crt</span><br><span class=\"line\"></span><br><span class=\"line\">//将客户端证书文件client.crt和客户端证书密钥文件client.key合并成客户端证书安装包client.pfx</span><br><span class=\"line\">openssl pkcs12 -export -<span class=\"keyword\">in</span> client.crt -inkey client.key -out client.pfx</span><br><span class=\"line\"></span><br><span class=\"line\">//保存生成的文件备用，其中server.crt和server.key是配置单向SSL时需要使用的证书文件，client.crt是配置双向SSL时需要使用的证书文件，client.pfx是配置双向SSL时需要客户端安装的证书文件</span><br><span class=\"line\"></span><br><span class=\"line\">//证书合并</span><br><span class=\"line\">cat server.key server.crt &gt; server.pem</span><br><span class=\"line\">cat client.key client.crt &gt; client.pem</span><br><span class=\"line\"></span><br><span class=\"line\">//配置到Nginx中:</span><br><span class=\"line\"></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    #添加<span class=\"number\">443</span>监听</span><br><span class=\"line\">    listen       <span class=\"number\">443</span>;</span><br><span class=\"line\">    #开启SSL</span><br><span class=\"line\">    ssl  on;</span><br><span class=\"line\">    #指定PEM格式的证书文件   </span><br><span class=\"line\">    ssl_certificate      /etc/nginx/conf.d/keys/server.pem;</span><br><span class=\"line\">    ssl_client_certificate     /etc/nginx/conf.d/keys/client.pem;</span><br><span class=\"line\">    ssl_certificate_key  /etc/nginx/conf.d/keys/server.key;</span><br><span class=\"line\"></span><br><span class=\"line\">    ssl_session_cache shared:SSL:<span class=\"number\">1</span>m;</span><br><span class=\"line\">    ssl_session_timeout  <span class=\"number\">5</span>m;</span><br><span class=\"line\"></span><br><span class=\"line\">    ssl_protocols SSLv2 SSLv3 TLSv1;</span><br><span class=\"line\">    ssl_ciphers  ALL:<span class=\"variable\">!ADH:!</span>EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;</span><br><span class=\"line\">    ssl_prefer_server_ciphers   on;</span><br><span class=\"line\"></span><br><span class=\"line\">    #将所有的http请求通过rewrite重写到https上即可</span><br><span class=\"line\">    # rewrite ^(.*)$  https://$host$<span class=\"number\">1</span> permanent;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">// 所有的操作完成后需要重启 Nginx 并输入证书密码</span><br><span class=\"line\"> service nginx restart</span><br></pre></td></tr></table></figure></div>\n<p>附 nginx.conf:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">user nginx;</span><br><span class=\"line\">worker_processes auto;</span><br><span class=\"line\">error_log /var/log/nginx/error.log;</span><br><span class=\"line\">pid /run/nginx.pid;</span><br><span class=\"line\"></span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">    worker_connections 1024;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">http &#123;</span><br><span class=\"line\">    sendfile            on;</span><br><span class=\"line\">    tcp_nopush          on;</span><br><span class=\"line\">    tcp_nodelay         on;</span><br><span class=\"line\">    keepalive_timeout   65;</span><br><span class=\"line\">    types_hash_max_size 2048;</span><br><span class=\"line\"></span><br><span class=\"line\">    include             /etc/nginx/mime.types;</span><br><span class=\"line\">    default_type        application/octet-stream;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tupstream backend &#123;</span><br><span class=\"line\">\t\tserver 127.0.0.1:8080;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen 443;</span><br><span class=\"line\">        server_name loyom.com; #填写绑定证书的域名</span><br><span class=\"line\">        ssl on;</span><br><span class=\"line\">        ssl_certificate /opt/ca/1_loyom.com_bundle.crt;</span><br><span class=\"line\">        ssl_certificate_key /opt/ca/2_loyom.com.key;</span><br><span class=\"line\">        ssl_session_timeout 5m;</span><br><span class=\"line\">        ssl_protocols TLSv1.2;</span><br><span class=\"line\">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</span><br><span class=\"line\">        ssl_prefer_server_ciphers on;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tlocation / &#123;</span><br><span class=\"line\">\t\t\tproxy_set_header Host $host;</span><br><span class=\"line\">\t\t\tproxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">\t\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">\t\t   </span><br><span class=\"line\">\t\t\tproxy_buffering off;</span><br><span class=\"line\">\t\t\tproxy_pass http://backend;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tserver &#123;</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">\t\t\tproxy_set_header Host $host;</span><br><span class=\"line\">\t\t\tproxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">\t\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">\t\t   </span><br><span class=\"line\">\t\t\tproxy_buffering off;</span><br><span class=\"line\">\t\t\tproxy_pass http://backend;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div></p>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"nginx","slug":"Centos/nginx","count":2,"path":"api/categories/Centos/nginx.json"},{"name":"ca","slug":"Centos/nginx/ca","count":1,"path":"api/categories/Centos/nginx/ca.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"nginx","slug":"nginx","count":3,"path":"api/tags/nginx.json"},{"name":"ca","slug":"ca","count":1,"path":"api/tags/ca.json"},{"name":"openssl","slug":"openssl","count":1,"path":"api/tags/openssl.json"}]},{"title":"安装Nginx","slug":"安装Nginx","date":"2018-12-11T10:26:08.000Z","updated":"2018-12-11T10:26:08.718Z","comments":true,"path":"api/articles/安装Nginx.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 官方下载地址下载Nginx的压缩包  .tar.gz</span></span><br><span class=\"line\">wget  http://nginx.org/download/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 解压</span></span><br><span class=\"line\">tar –xzvf nginx-1.2.1.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装依赖的相关工具</span></span><br><span class=\"line\">yum -y install pcre-devel openssl openssl-devel</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 配置编译</span></span><br><span class=\"line\">./configure --prefix=/usr/<span class=\"built_in\">local</span>/nginx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 编译并安装</span></span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###　常用命令</span></span><br><span class=\"line\">nginx      \t\t\t<span class=\"comment\">#启动Nginx</span></span><br><span class=\"line\">nginx -s reload\t\t<span class=\"comment\">#修改配置后重新加载生效</span></span><br><span class=\"line\">nginx -s reopen\t\t<span class=\"comment\">#重新打开日志文件</span></span><br><span class=\"line\">nginx -t -c /path/to/nginx.conf \t\t<span class=\"comment\">#测试nginx配置文件是否正确</span></span><br><span class=\"line\">nginx -s stop \t\t<span class=\"comment\">#快速停止Nginx</span></span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>### 官方下载地址下","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"nginx","slug":"Centos/nginx","count":2,"path":"api/categories/Centos/nginx.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"nginx","slug":"nginx","count":3,"path":"api/tags/nginx.json"}]},{"title":"编译安装Ruby2.3.1","slug":"编译安装Ruby2-3-1","date":"2018-12-12T02:02:57.000Z","updated":"2018-12-12T02:02:57.174Z","comments":true,"path":"api/articles/编译安装Ruby2-3-1.json","excerpt":"","keywords":null,"cover":null,"content":"<p>由于需要GCC和使用OpenSSL 所以需要先安装</p>\n<h3 id=\"安装-GCC\"><a href=\"#安装-GCC\" class=\"headerlink\" title=\"安装 GCC\"></a>安装 GCC</h3><p>sudo yum install -y gcc</p>\n<h3 id=\"安装-openssl\"><a href=\"#安装-openssl\" class=\"headerlink\" title=\"安装 openssl\"></a>安装 openssl</h3><p>下载: <a href=\"https://www.openssl.org/source/\" target=\"_blank\" rel=\"noopener\">https://www.openssl.org/source/</a></p>\n<p>安装:<br>tar -xzvf openssl-1.0.1t.tar.gz</p>\n<p>cd openssl-1.0.1t<br>./config<br>make<br>sudo make install</p>\n<p>测试: openssl</p>\n<h3 id=\"安装Ruby\"><a href=\"#安装Ruby\" class=\"headerlink\" title=\"安装Ruby\"></a>安装Ruby</h3><p>下载: <a href=\"https://cache.ruby-lang.org/pub/ruby/2.3/ruby-2.3.1.tar.gz\" target=\"_blank\" rel=\"noopener\">https://cache.ruby-lang.org/pub/ruby/2.3/ruby-2.3.1.tar.gz</a><br>安装: tar -xzvf ruby-2.3.1.tar.gz</p>\n<p>cd ruby-2.3.1<br>./configure  –with-openssl-dir=/usr/local/ssl<br>make<br>sudo make install</p>\n<p>查看: ruby -v</p>\n<h3 id=\"gem源\"><a href=\"#gem源\" class=\"headerlink\" title=\"gem源\"></a>gem源</h3><p>gem sources -l   ### 查询</p>\n<p>gem sources –remove <a href=\"https://rubygems.org/\" target=\"_blank\" rel=\"noopener\">https://rubygems.org/</a>  ## 移除</p>\n<p>gem sources -a <a href=\"https://ruby.taobao.org/\" target=\"_blank\" rel=\"noopener\">https://ruby.taobao.org/</a>   ##添加</p>\n<p>gem sources -a <a href=\"http://gems.ruby-china.org/\" target=\"_blank\" rel=\"noopener\">http://gems.ruby-china.org/</a></p>\n","text":"由于需要GCC和使用OpenSSL 所以需要先安装安装 GCCsudo yum install -y gcc安装 openssl下载: https://www.openssl.org/source/安装:<br>tar -xzvf openssl-1.0.1t.tar.gzcd ","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"ruby","slug":"Centos/ruby","count":1,"path":"api/categories/Centos/ruby.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"install","slug":"install","count":9,"path":"api/tags/install.json"},{"name":"ruby","slug":"ruby","count":1,"path":"api/tags/ruby.json"}]},{"title":"检测服务器是否连接着网络","slug":"检测服务器是否连接着网络","date":"2018-12-12T02:00:48.000Z","updated":"2018-12-12T02:00:48.336Z","comments":true,"path":"api/articles/检测服务器是否连接着网络.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 检测服务器是否连接着网络,如果网络不通 则 3次后 关机</span></span><br><span class=\"line\"><span class=\"comment\"># crontab -e</span></span><br><span class=\"line\"><span class=\"comment\"># */5 * * * * ./check.sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"Starting test network was clear...\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">test</span> -e ./checkInfo</span><br><span class=\"line\">\t<span class=\"keyword\">then</span></span><br><span class=\"line\">\t<span class=\"built_in\">echo</span> <span class=\"string\">\"CheckInfo File Exist...\"</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">\tcat /dev/null &gt; ./checkInfo</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">last_res=`head -1 ./checkInfo`</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">checkInternet</span></span>()&#123;</span><br><span class=\"line\">\tping_res=1</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> url <span class=\"keyword\">in</span> <span class=\"string\">\"8.8.8.8\"</span> <span class=\"string\">\"61.139.2.69\"</span> <span class=\"string\">\"114.114.114.114\"</span> <span class=\"string\">\"168.95.1.1\"</span> <span class=\"string\">\"223.5.5.5\"</span> <span class=\"string\">\"180.76.76.76\"</span></span><br><span class=\"line\">\t<span class=\"keyword\">do</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">echo</span> <span class=\"string\">\"PING <span class=\"variable\">$&#123;url&#125;</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\tping=`ping -c 3 <span class=\"variable\">$&#123;url&#125;</span>|awk <span class=\"string\">'NR==7 &#123;print $4&#125;'</span>`</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> [ <span class=\"variable\">$&#123;ping&#125;</span> -eq 0 ]</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">then</span></span><br><span class=\"line\">\t\t\t\tping_res=1</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t\tping_res=2</span><br><span class=\"line\">\t\t<span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> [ <span class=\"variable\">$&#123;ping_res&#125;</span> -eq 2 ]</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">then</span></span><br><span class=\"line\">\t\t\t<span class=\"built_in\">break</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">fi</span></span><br><span class=\"line\">\t<span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">return</span> <span class=\"variable\">$&#123;ping_res&#125;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">checkInternet</span><br><span class=\"line\"></span><br><span class=\"line\">result=<span class=\"string\">\"$?\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$&#123;result&#125;</span> -eq 1 ]</span><br><span class=\"line\">\t<span class=\"keyword\">then</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$&#123;last_res&#125;</span>\"</span> = <span class=\"string\">\"1\"</span> ]</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">then</span></span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">echo</span> <span class=\"string\">\"2\"</span> &gt; ./checkInfo</span><br><span class=\"line\">\t\t<span class=\"keyword\">elif</span> [ <span class=\"string\">\"<span class=\"variable\">$&#123;last_res&#125;</span>\"</span> = <span class=\"string\">\"2\"</span> ]</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">then</span></span><br><span class=\"line\">\t\t\t\tcat /dev/null &gt; ./checkInfo</span><br><span class=\"line\">\t\t\t\tinit 0</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">echo</span> <span class=\"string\">\"1\"</span> &gt; ./checkInfo</span><br><span class=\"line\">\t\t<span class=\"keyword\">fi</span></span><br><span class=\"line\">\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\tcat /dev/null &gt; ./checkInfo</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"network","slug":"Centos/network","count":1,"path":"api/categories/Centos/network.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"network","slug":"network","count":1,"path":"api/tags/network.json"},{"name":"shell","slug":"shell","count":1,"path":"api/tags/shell.json"}]},{"title":"设置证书登录Centos7","slug":"设置证书登录Centos7","date":"2018-12-11T09:50:58.000Z","updated":"2018-12-11T09:50:58.329Z","comments":true,"path":"api/articles/设置证书登录Centos7.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 修改系统检查项</span></span><br><span class=\"line\">getenforce</span><br><span class=\"line\"></span><br><span class=\"line\">setenforce 0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 使用 ssh-keygen 生成证书 私钥 (id_rsa) 与公钥 (id_rsa.pub)</span></span><br><span class=\"line\">ssh-keygen -t rsa</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 如果没有则创建此目录</span></span><br><span class=\"line\">mkdir ~/.ssh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 如果没有则创建此文件</span></span><br><span class=\"line\">touch ~/.ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 将公钥写入授权文件</span></span><br><span class=\"line\">cat id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\">cat id_rsa_home_t1.pub &gt;&gt; ~/.ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 添加9010的端口</span></span><br><span class=\"line\">firewall-cmd --zone=public --add-port=9010/tcp --permanent</span><br><span class=\"line\">firewall-cmd --zone=public --add-port=9010/udp --permanent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 删除22端口</span></span><br><span class=\"line\">firewall-cmd --zone=public --remove-port=22/tcp --permanent</span><br><span class=\"line\">firewall-cmd --zone=public --remove-port=22/udp --permanent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 查看已经开放的端口</span></span><br><span class=\"line\">firewall-cmd --list-ports</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 重启防火墙</span></span><br><span class=\"line\">firewall-cmd --reload</span><br><span class=\"line\">firewall-cmd --complete-reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 编辑SSH配置文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">vi /etc/ssh/sshd_config</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 修改默认端口,非必要</span></span><br><span class=\"line\">Port 9010</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 禁用root账户登录，非必要</span></span><br><span class=\"line\">PermitRootLogin no</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 禁用密码登录</span></span><br><span class=\"line\">PasswordAuthentication no</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 是否让 sshd 去检查用户家目录或相关档案的权限数据</span></span><br><span class=\"line\">StrictModes no</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 是否允许用户自行使用成对的密钥系统进行登入行为，仅针对 version 2。</span></span><br><span class=\"line\"><span class=\"comment\"># 至于自制的公钥数据就放置于用户家目录下的 .ssh/authorized_keys 内</span></span><br><span class=\"line\">RSAAuthentication yes</span><br><span class=\"line\">PubkeyAuthentication yes</span><br><span class=\"line\">AuthorizedKeysFile      %h/.ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 重启ssh服务</span></span><br><span class=\"line\">systemctl stop firewalld</span><br><span class=\"line\">systemctl restart sshd</span><br><span class=\"line\">systemctl start firewalld</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"ssh","slug":"Centos/ssh","count":1,"path":"api/categories/Centos/ssh.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"firewall-cmd","slug":"firewall-cmd","count":3,"path":"api/tags/firewall-cmd.json"},{"name":"ssh-keygen","slug":"ssh-keygen","count":1,"path":"api/tags/ssh-keygen.json"}]}]}