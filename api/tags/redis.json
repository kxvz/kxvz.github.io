{"name":"redis","slug":"redis","count":3,"postlist":[{"title":"Linux安装Redis,并用Java进行操作","slug":"Linux安装Redis-并用Java进行操作","date":"2018-12-11T10:32:02.000Z","updated":"2018-12-11T10:32:02.380Z","comments":true,"path":"api/articles/Linux安装Redis-并用Java进行操作.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 进入目录</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /opt/app/redis</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 下载Redis</span></span><br><span class=\"line\">wget http://download.redis.io/releases/redis-3.0.7.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 改权限?</span></span><br><span class=\"line\">chmod -R 777 redis-3.0.5.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 解压</span></span><br><span class=\"line\">tar xzf redis-3.0.5.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 进入Redis的目录</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> redis-3.0.5</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 安装到指定目录</span></span><br><span class=\"line\">make MALLOC=libc PREFIX=/opt/app/redis install </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 如果安装失败,缺少GCC 则需要先安装 GCC</span></span><br><span class=\"line\">yum install -y gcc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 安装成功后进入到 /opt/app/redis/cont/bin 目录可以看到如下文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">redis-benchmark</span><br><span class=\"line\">redis-check-aof</span><br><span class=\"line\">redis-check-dump</span><br><span class=\"line\">redis-cli</span><br><span class=\"line\">redis-sentinel -&gt; redis-server</span><br><span class=\"line\">redis-server</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 后台启动Redis服务</span></span><br><span class=\"line\">./redis-server &amp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 测试连接</span></span><br><span class=\"line\">./redis-cli</span><br><span class=\"line\"></span><br><span class=\"line\">127.0.0.1:6379&gt; <span class=\"built_in\">set</span> a b</span><br><span class=\"line\">OK</span><br><span class=\"line\">127.0.0.1:6379&gt; get a</span><br><span class=\"line\"><span class=\"string\">\"b\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 到此Redis的安装和启动完成</span></span><br></pre></td></tr></table></figure></div>\n<p>测试Java使用Redis<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"XML\"><figure class=\"iseeu highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 使用Maven引入支持的Jar</span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span>  </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>redis.clients<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span>  </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jedis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span>  </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.8.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span>  </span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div></p>\n <div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVA\"><figure class=\"iseeu highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//测试方法</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] params)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">       Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">\"127.0.0.1\"</span>);</span><br><span class=\"line\">       jedis.set(<span class=\"string\">\"a\"</span>, <span class=\"string\">\"b....\"</span>);</span><br><span class=\"line\">       System.out.println(<span class=\"string\">\"================================================\"</span>);</span><br><span class=\"line\">       System.out.println(jedis.get(<span class=\"string\">\"a\"</span>));</span><br><span class=\"line\">       System.out.println(<span class=\"string\">\"================================================\"</span>);</span><br><span class=\"line\">       jedis.rename(<span class=\"string\">\"a\"</span>, <span class=\"string\">\"a1\"</span>);</span><br><span class=\"line\">       System.out.println(jedis.get(<span class=\"string\">\"a\"</span>));</span><br><span class=\"line\">       System.out.println(<span class=\"string\">\"================================================\"</span>);</span><br><span class=\"line\">       System.out.println(jedis.get(<span class=\"string\">\"a1\"</span>));</span><br><span class=\"line\">       System.out.println(<span class=\"string\">\"================================================\"</span>);</span><br><span class=\"line\">       jedis.del(<span class=\"string\">\"a1\"</span>);</span><br><span class=\"line\">       System.out.println(jedis.get(<span class=\"string\">\"a1\"</span>));</span><br><span class=\"line\">       System.out.println(<span class=\"string\">\"================================================\"</span>);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></div>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//  运行结果</span><br><span class=\"line\"></span><br><span class=\"line\">================================================</span><br><span class=\"line\">b....</span><br><span class=\"line\">================================================</span><br><span class=\"line\">null</span><br><span class=\"line\">================================================</span><br><span class=\"line\">b....</span><br><span class=\"line\">================================================</span><br><span class=\"line\">null</span><br><span class=\"line\">================================================</span><br></pre></td></tr></table></figure></div>","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"java","slug":"Centos/java","count":2,"path":"api/categories/Centos/java.json"},{"name":"redis","slug":"Centos/java/redis","count":1,"path":"api/categories/Centos/java/redis.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"java","slug":"java","count":25,"path":"api/tags/java.json"},{"name":"redis","slug":"redis","count":3,"path":"api/tags/redis.json"}]},{"title":"使用Redis-cli操作Redis","slug":"使用Redis-cli操作Redis","date":"2018-12-11T09:44:18.000Z","updated":"2018-12-11T09:44:18.475Z","comments":true,"path":"api/articles/使用Redis-cli操作Redis.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 使用端口和密码登录</span></span><br><span class=\"line\">redis-cli -p 6379 -a test123</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 先使用端口进入 然后在授权密码</span></span><br><span class=\"line\">redis-cli -p 6379</span><br><span class=\"line\"></span><br><span class=\"line\">127.0.0.1:6379&gt; auth test123</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 清空所有缓存</span></span><br><span class=\"line\">127.0.0.1:6379&gt; flushall</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 查询所有存在缓存数据</span></span><br><span class=\"line\">127.0.0.1:6379&gt; keys <span class=\"string\">'*'</span></span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>## 使用端口和密码登录<br>redis-cli -p 6379 -a test123<br><br>## 先使用端口进入 然后在授权密码<","link":"","raw":null,"photos":[],"categories":[{"name":"redis","slug":"redis","count":1,"path":"api/categories/redis.json"}],"tags":[{"name":"redis","slug":"redis","count":3,"path":"api/tags/redis.json"},{"name":"redis-cli","slug":"redis-cli","count":1,"path":"api/tags/redis-cli.json"}]},{"title":"在spring-starter-redis中实现一个RedisSerializer<T>","slug":"在spring-starter-redis中实现一个RedisSerializer-T","date":"2018-12-11T09:12:53.000Z","updated":"2018-12-11T09:12:53.090Z","comments":true,"path":"api/articles/在spring-starter-redis中实现一个RedisSerializer-T.json","excerpt":"","keywords":null,"cover":null,"content":"<h1 id=\"实现一个RedisSerializer用在spring-boot-starter-data-redis中\"><a href=\"#实现一个RedisSerializer用在spring-boot-starter-data-redis中\" class=\"headerlink\" title=\"实现一个RedisSerializer用在spring-boot-starter-data-redis中\"></a>实现一个RedisSerializer<t>用在spring-boot-starter-data-redis中</t></h1><h3 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求:\"></a>需求:</h3><p>因为会使用到Spring-redis作为缓存框架缓存数据,不让程序每次查询都进到数据库中,因此正对不同的数据格式需要进行序列化和反序列化,于是就自己实现了一个简单的序列化类</p>\n<h3 id=\"首先-配置-Springboot-的-redis-配置\"><a href=\"#首先-配置-Springboot-的-redis-配置\" class=\"headerlink\" title=\"首先 配置 Springboot 的 redis 配置\"></a>首先 配置 Springboot 的 redis 配置</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># REDIS (RedisProperties)</span></span><br><span class=\"line\"><span class=\"comment\"># Redis数据库索引（默认为0）</span></span><br><span class=\"line\">spring.redis.database=0  </span><br><span class=\"line\"><span class=\"comment\"># Redis服务器地址</span></span><br><span class=\"line\">spring.redis.host=192.168.0.11</span><br><span class=\"line\"><span class=\"comment\"># Redis服务器连接端口</span></span><br><span class=\"line\">spring.redis.port=6379  </span><br><span class=\"line\"><span class=\"comment\"># Redis服务器连接密码（默认为空）</span></span><br><span class=\"line\">spring.redis.password=ThisIsPass</span><br><span class=\"line\"><span class=\"comment\"># 连接池最大连接数（使用负值表示没有限制）</span></span><br><span class=\"line\">spring.redis.pool.max-active=-1  </span><br><span class=\"line\"><span class=\"comment\"># 连接池最大阻塞等待时间（使用负值表示没有限制）</span></span><br><span class=\"line\">spring.redis.pool.max-wait=-1  </span><br><span class=\"line\"><span class=\"comment\"># 连接池中的最大空闲连接</span></span><br><span class=\"line\">spring.redis.pool.max-idle=8  </span><br><span class=\"line\"><span class=\"comment\"># 连接池中的最小空闲连接</span></span><br><span class=\"line\">spring.redis.pool.min-idle=2  </span><br><span class=\"line\"><span class=\"comment\"># 连接超时时间（毫秒）</span></span><br><span class=\"line\">spring.redis.timeout=50</span><br></pre></td></tr></table></figure>\n<h3 id=\"接下来实现-序列化类-这里使用到了GSON\"><a href=\"#接下来实现-序列化类-这里使用到了GSON\" class=\"headerlink\" title=\"接下来实现 序列化类 (这里使用到了GSON):\"></a>接下来实现 序列化类 (这里使用到了GSON):</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVA\"><figure class=\"iseeu highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.data.redis.serializer.RedisSerializer;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.data.redis.serializer.SerializationException;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RedisValueSerializer</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">RedisSerializer</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">byte</span>[] EMPTY_ARRAY = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">0</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">byte</span>[] serialize(T t) <span class=\"keyword\">throws</span> SerializationException &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (t == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> EMPTY_ARRAY;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        String tmp = String.format(<span class=\"string\">\"%s_%s\"</span>, t.getClass().getName(), JsonUtils.obj2Json(t));</span><br><span class=\"line\">        <span class=\"keyword\">return</span> tmp.getBytes(Encode.UTF8);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">deserialize</span><span class=\"params\">(<span class=\"keyword\">byte</span>[] bytes)</span> <span class=\"keyword\">throws</span> SerializationException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (bytes == <span class=\"keyword\">null</span> || bytes.length &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            String tmp = <span class=\"keyword\">new</span> String(bytes, Encode.UTF8);</span><br><span class=\"line\">            String className = tmp.substring(<span class=\"number\">0</span>, tmp.indexOf(<span class=\"string\">\"_&#123;\"</span>));</span><br><span class=\"line\">            String json = tmp.substring(tmp.indexOf(<span class=\"string\">\"_&#123;\"</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> (T) JsonUtils.json2Obj(json, Class.forName(className));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ClassNotFoundException ex) &#123;</span><br><span class=\"line\">            LogUtils.error(TAG.DEF, <span class=\"keyword\">this</span>.getClass(), <span class=\"string\">\"deserialize\"</span>, ex);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<h3 id=\"然后RedisConfig\"><a href=\"#然后RedisConfig\" class=\"headerlink\" title=\"然后RedisConfig:\"></a>然后RedisConfig:</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVA\"><figure class=\"iseeu highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.cache.CacheManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.cache.annotation.CachingConfigurerSupport;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Primary;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.data.redis.cache.RedisCacheManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.data.redis.core.StringRedisTemplate;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Primary</span></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RedisConfig</span> <span class=\"keyword\">extends</span> <span class=\"title\">CachingConfigurerSupport</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Primary</span></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> CacheManager <span class=\"title\">cacheManager</span><span class=\"params\">(RedisTemplate redisTemplate)</span> </span>&#123;</span><br><span class=\"line\">        RedisCacheManager rcm = <span class=\"keyword\">new</span> RedisCacheManager(redisTemplate);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> rcm;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Primary</span></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> StringRedisTemplate <span class=\"title\">redisTemplate</span><span class=\"params\">(RedisConnectionFactory factory)</span> </span>&#123;</span><br><span class=\"line\">        StringRedisTemplate template = <span class=\"keyword\">new</span> StringRedisTemplate(factory);</span><br><span class=\"line\">        template.setValueSerializer(<span class=\"keyword\">new</span> RedisValueSerializer&lt;Object&gt;());</span><br><span class=\"line\">        template.afterPropertiesSet();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> template;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<h3 id=\"然后就可以使用缓存注解了\"><a href=\"#然后就可以使用缓存注解了\" class=\"headerlink\" title=\"然后就可以使用缓存注解了:\"></a>然后就可以使用缓存注解了:</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVA\"><figure class=\"iseeu highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Cacheable</span>(key =<span class=\"string\">\"#p0\"</span>) </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@CachePut</span>(key = <span class=\"string\">\"#p0\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@CacheEvict</span>(key =<span class=\"string\">\"#p0\"</span>,allEntries=<span class=\"keyword\">true</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></div>\n<h3 id=\"注解使用参考\"><a href=\"#注解使用参考\" class=\"headerlink\" title=\"注解使用参考:\"></a>注解使用参考:</h3><p><a href=\"http://blog.csdn.net/sanjay_f/article/details/47372967\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/sanjay_f/article/details/47372967</a></p>\n","text":"实现一个RedisSerializer用在spring-boot-starter-data-redis中需求:因为会使用到Spring-redis作为缓存框架缓存数据,不让程序每次查询都进到数据库中,因此正对不同的数据格式需要进行序列化和反序列化,于是就自己实现了一个简单的序列化","link":"","raw":null,"photos":[],"categories":[{"name":"java","slug":"java","count":21,"path":"api/categories/java.json"},{"name":"redis","slug":"java/redis","count":1,"path":"api/categories/java/redis.json"},{"name":"RedisSerializer","slug":"java/redis/RedisSerializer","count":1,"path":"api/categories/java/redis/RedisSerializer.json"}],"tags":[{"name":"java","slug":"java","count":25,"path":"api/tags/java.json"},{"name":"redis","slug":"redis","count":3,"path":"api/tags/redis.json"},{"name":"spring-boot","slug":"spring-boot","count":3,"path":"api/tags/spring-boot.json"},{"name":"RedisSerializer","slug":"RedisSerializer","count":1,"path":"api/tags/RedisSerializer.json"}]}]}