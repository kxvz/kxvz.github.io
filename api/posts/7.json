{"total":94,"pageSize":10,"pageCount":10,"data":[{"title":"Centos 安装 Scala","slug":"Centos-安装-Scala","date":"2018-12-11T09:53:44.000Z","updated":"2018-12-11T09:53:44.795Z","comments":true,"path":"api/articles/Centos-安装-Scala.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 下载: http://www.scala-lang.org/download/all.html</span></span><br><span class=\"line\"><span class=\"comment\">## 下载地址: https://downloads.lightbend.com/scala/2.12.2/scala-2.12.2.rpm</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 使用本地安装</span></span><br><span class=\"line\"></span><br><span class=\"line\">yum localinstall -y scala-2.12.2.rpm</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看版本</span></span><br><span class=\"line\"></span><br><span class=\"line\">scala -version</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 测试</span></span><br><span class=\"line\"></span><br><span class=\"line\">scala</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>## 下载: http://www.scala-lang.org/download/all.html<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"scala","slug":"Centos/scala","count":1,"path":"api/categories/Centos/scala.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"scala","slug":"scala","count":1,"path":"api/tags/scala.json"},{"name":"install","slug":"install","count":9,"path":"api/tags/install.json"}]},{"title":"Centos安装Kafka","slug":"Centos安装Kafka","date":"2018-12-11T09:52:51.000Z","updated":"2018-12-11T09:52:51.182Z","comments":true,"path":"api/articles/Centos安装Kafka.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 首先需要安装好 Scala 2.12</span></span><br><span class=\"line\"><span class=\"comment\">### 下载页面: http://kafka.apache.org/downloads</span></span><br><span class=\"line\"><span class=\"comment\">### 下载地址:https://www.apache.org/dyn/closer.cgi?path=/kafka/0.10.2.0/kafka_2.12-0.10.2.0.tgz</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###　解压出来</span></span><br><span class=\"line\">tar -zxvf kafka_2.12-0.10.2.0.tgz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> kafka_2.12-0.10.2.0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动 (启动之前需要先启动好Zookeeper 并在 server.properties 配置好zookeeper的连接)</span></span><br><span class=\"line\">bin/kafka-server-start.sh -daemon config/server.properties</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 停止</span></span><br><span class=\"line\">bin/kafka-server-stop.sh</span><br></pre></td></tr></table></figure></div>\n<p>配置文件 server.properties 说明:<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 当前机器在集群中的唯一标识，和zookeeper的myid性质一样</span></span><br><span class=\"line\">broker.id=0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Switch to enable topic deletion or not, default value is false</span></span><br><span class=\"line\"><span class=\"comment\">#delete.topic.enable=true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 消息保存的最大值5M</span></span><br><span class=\"line\">message.max.byte=5242880</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># kafka保存消息的副本数，如果一个副本失效了，另一个还可以继续提供服务</span></span><br><span class=\"line\">default.replication.factor=2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 取消息的最大直接数</span></span><br><span class=\"line\">replica.fetch.max.bytes=5242880</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################# Socket Server Settings #############################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 当前kafka对外提供服务的端口默认是9092</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">port</span>=<span class=\"number\">18082</span></span><br><span class=\"line\"></span><br><span class=\"line\">host.name=192.168.99.250</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Hostname and port the broker will advertise to producers and consumers. If not set, </span></span><br><span class=\"line\"><span class=\"comment\"># it uses the value for \"listeners\" if configured.  Otherwise, it will use the value</span></span><br><span class=\"line\"><span class=\"comment\"># returned from java.net.InetAddress.getCanonicalHostName().</span></span><br><span class=\"line\"><span class=\"comment\">#advertised.listeners=PLAINTEXT://your.host.name:9092</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Maps listener names to security protocols, the default is for them to be the same. See the config documentation for more details</span></span><br><span class=\"line\"><span class=\"comment\">#listener.security.protocol.map=PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 这个是borker进行网络处理的线程数</span></span><br><span class=\"line\">num.network.threads=3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 这个是borker进行I/O处理的线程数</span></span><br><span class=\"line\">num.io.threads=8</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 发送缓冲区buffer大小，数据不是一下子就发送的，先回存储到缓冲区了到达一定的大小后在发送，能提高性能</span></span><br><span class=\"line\">socket.send.buffer.bytes=102400</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># kafka接收缓冲区大小，当数据到达一定大小后在序列化到磁盘</span></span><br><span class=\"line\">socket.receive.buffer.bytes=102400</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 这个参数是向kafka请求消息或者向kafka发送消息的请请求的最大数，这个值不能超过java的堆栈大小</span></span><br><span class=\"line\">socket.request.max.bytes=104857600</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################# Log Basics #############################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 消息存放的目录，这个目录可以配置为“，”逗号分割的表达式，上面的num.io.threads要大于这个目录的个数这个目录，如果配置多个目录，新创建的topic他把消息持久化的地方是，当前以逗号分割的目录中，那个分区数最少就放那一个</span></span><br><span class=\"line\">log.dirs=/tmp/kafka-logs</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 默认的分区数，一个topic默认1个分区数</span></span><br><span class=\"line\">num.partitions=1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 每个数据目录用来日志恢复的线程数</span></span><br><span class=\"line\">num.recovery.threads.per.data.dir=1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################# Log Flush Policy #############################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 是否启用log压缩，一般不用启用，启用的话可以提高性能</span></span><br><span class=\"line\">log.cleaner.enable=false </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 当消息数量到达10000时强制写入到磁盘 (一般不建议使用这个选项)</span></span><br><span class=\"line\"><span class=\"comment\">#log.flush.interval.messages=10000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 强制写入磁盘的间隔时间 (一般不建议使用这个选项)</span></span><br><span class=\"line\"><span class=\"comment\">#log.flush.interval.ms=1000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################# Log Retention Policy #############################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 默认消息的最大持久化时间，168小时，7天</span></span><br><span class=\"line\">log.retention.hours=168</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 这个参数是：因为kafka的消息是以追加的形式落地到文件，当超过这个值的时候，kafka会新起一个文件</span></span><br><span class=\"line\">log.segment.bytes=1073741824</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 每隔300000毫秒去检查上面配置的log失效时间（log.retention.hours=168 ），到目录查看是否有过期的消息如果有，删除</span></span><br><span class=\"line\">log.retention.check.interval.ms=300000</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################# Zookeeper #############################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># zookeeper的连接配置</span></span><br><span class=\"line\">zookeeper.connect=192.168.101.251:2181,192.168.10.252:2181,192.168.10.253:2181,192.168.10.254:2181</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 访问zookeeper的超时时间</span></span><br><span class=\"line\">zookeeper.connection.timeout.ms=6000</span><br></pre></td></tr></table></figure></p>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>### 首先需要安装好 Scala 2.12<br>### 下载页面: http://kafka.apache.org/downl","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"kafka","slug":"Centos/kafka","count":1,"path":"api/categories/Centos/kafka.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"kafka","slug":"kafka","count":1,"path":"api/tags/kafka.json"}]},{"title":"Centos7 重新分配数据盘","slug":"Centos7-重新分配数据盘","date":"2018-12-11T09:51:47.000Z","updated":"2018-12-11T09:51:47.289Z","comments":true,"path":"api/articles/Centos7-重新分配数据盘.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 假设有一块 500G的空间分配给了/home 现在需要重新进行分配 /home 100G 和 /opt 400G</span></span><br><span class=\"line\"></span><br><span class=\"line\">==注意备份数据==</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 卸载/home, 如果无法卸载请先终止使用/home的进程</span></span><br><span class=\"line\">umount /home</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 删除/home所在的lv</span></span><br><span class=\"line\">lvremove /dev/mapper/cl-home</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 新创建一个容量为100G的/home lv</span></span><br><span class=\"line\">lvcreate -L 100G -n home cl</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 创建文件系统</span></span><br><span class=\"line\">mkfs.xfs /dev/cl/home</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 挂载此lv到/home目录</span></span><br><span class=\"line\">mount /dev/cl/home /home </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 新创建一个容量为400G的/opt lv</span></span><br><span class=\"line\">lvcreate -L 400G -n opt cl</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 创建文件系统</span></span><br><span class=\"line\">mkfs.xfs /dev/cl/opt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 挂载此lv到/opt</span></span><br><span class=\"line\">mount /dev/cl/opt /opt </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 编辑系统磁盘</span></span><br><span class=\"line\">vi /ect/fstab</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 添加两行配置</span></span><br><span class=\"line\">/dev/mapper/cl-home     /home                   xfs     defaults        0 0</span><br><span class=\"line\">/dev/mapper/cl-opt      /opt                    xfs     defaults        0 0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 验证配置是否正确</span></span><br><span class=\"line\">mount -a</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 重新进行一次 mount</span></span><br><span class=\"line\">mount -n -o remount,rw /</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 重启服务器</span></span><br><span class=\"line\">init 6</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"mount","slug":"Centos/mount","count":2,"path":"api/categories/Centos/mount.json"}],"tags":[{"name":"mount","slug":"mount","count":2,"path":"api/tags/mount.json"},{"name":"disk","slug":"disk","count":4,"path":"api/tags/disk.json"},{"name":"centos","slug":"centos","count":1,"path":"api/tags/centos.json"}]},{"title":"设置证书登录Centos7","slug":"设置证书登录Centos7","date":"2018-12-11T09:50:58.000Z","updated":"2018-12-11T09:50:58.329Z","comments":true,"path":"api/articles/设置证书登录Centos7.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 修改系统检查项</span></span><br><span class=\"line\">getenforce</span><br><span class=\"line\"></span><br><span class=\"line\">setenforce 0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 使用 ssh-keygen 生成证书 私钥 (id_rsa) 与公钥 (id_rsa.pub)</span></span><br><span class=\"line\">ssh-keygen -t rsa</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 如果没有则创建此目录</span></span><br><span class=\"line\">mkdir ~/.ssh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 如果没有则创建此文件</span></span><br><span class=\"line\">touch ~/.ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 将公钥写入授权文件</span></span><br><span class=\"line\">cat id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\">cat id_rsa_home_t1.pub &gt;&gt; ~/.ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 添加9010的端口</span></span><br><span class=\"line\">firewall-cmd --zone=public --add-port=9010/tcp --permanent</span><br><span class=\"line\">firewall-cmd --zone=public --add-port=9010/udp --permanent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 删除22端口</span></span><br><span class=\"line\">firewall-cmd --zone=public --remove-port=22/tcp --permanent</span><br><span class=\"line\">firewall-cmd --zone=public --remove-port=22/udp --permanent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 查看已经开放的端口</span></span><br><span class=\"line\">firewall-cmd --list-ports</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 重启防火墙</span></span><br><span class=\"line\">firewall-cmd --reload</span><br><span class=\"line\">firewall-cmd --complete-reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 编辑SSH配置文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">vi /etc/ssh/sshd_config</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 修改默认端口,非必要</span></span><br><span class=\"line\">Port 9010</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 禁用root账户登录，非必要</span></span><br><span class=\"line\">PermitRootLogin no</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 禁用密码登录</span></span><br><span class=\"line\">PasswordAuthentication no</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 是否让 sshd 去检查用户家目录或相关档案的权限数据</span></span><br><span class=\"line\">StrictModes no</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 是否允许用户自行使用成对的密钥系统进行登入行为，仅针对 version 2。</span></span><br><span class=\"line\"><span class=\"comment\"># 至于自制的公钥数据就放置于用户家目录下的 .ssh/authorized_keys 内</span></span><br><span class=\"line\">RSAAuthentication yes</span><br><span class=\"line\">PubkeyAuthentication yes</span><br><span class=\"line\">AuthorizedKeysFile      %h/.ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 重启ssh服务</span></span><br><span class=\"line\">systemctl stop firewalld</span><br><span class=\"line\">systemctl restart sshd</span><br><span class=\"line\">systemctl start firewalld</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"ssh","slug":"Centos/ssh","count":1,"path":"api/categories/Centos/ssh.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"firewall-cmd","slug":"firewall-cmd","count":3,"path":"api/tags/firewall-cmd.json"},{"name":"ssh-keygen","slug":"ssh-keygen","count":1,"path":"api/tags/ssh-keygen.json"}]},{"title":"关于Windows关闭相关端口的操作","slug":"关于Windows关闭相关端口的操作","date":"2018-12-11T09:50:15.000Z","updated":"2018-12-11T09:50:15.105Z","comments":true,"path":"api/articles/关于Windows关闭相关端口的操作.json","excerpt":"","keywords":null,"cover":null,"content":"<p>针对目前爆发的比特币勒索病毒传播端口的处理, 禁用本机上的 相关端口 以阻止 电脑感染</p>\n<p>(PS. 以后相关禁用端口的操作此步骤也可用 )</p>\n<ol>\n<li><p>首先找到 控制面板 </p>\n</li>\n<li><p>在控制面板中找到 Windows 防火墙 并点开</p>\n</li>\n<li><p>在防火墙中 选择高级设置  </p>\n</li>\n<li><p>在高级设置中选择 入站规则</p>\n</li>\n<li><p>选择好 入站规则 后 在右侧选择 新建规则</p>\n</li>\n<li><p>在新建规则中选择  端口 并 下一步</p>\n</li>\n<li><p>此处先选择 TCP(UDP) 输入需要禁用的端口  445,137,138,139  并进行 下一步</p>\n</li>\n</ol>\n<p>(注意 完成设置后需要重复 设置 UDP 的相同禁用端口 )</p>\n<ol start=\"8\">\n<li>选择 阻止连接  并 下一步</li>\n</ol>\n<ol start=\"9\">\n<li>勾选所有的选项  然后下一步</li>\n</ol>\n<ol start=\"10\">\n<li>为此规则起个名字 然后 点击  完成</li>\n</ol>\n<p>至此 阻止 TCP 协议上的 445相关端口 就已经可以了 需要重复 新建规则 建立 阻止 UDP 协议上的 相关端口,操作步骤相同…</p>\n<p>图文参考:  <a href=\"https://my.oschina.net/Kxvz/blog/901607\" target=\"_blank\" rel=\"noopener\">https://my.oschina.net/Kxvz/blog/901607</a></p>\n","text":"针对目前爆发的比特币勒索病毒传播端口的处理, 禁用本机上的 相关端口 以阻止 电脑感染(PS. 以后相关禁用端口的操作此步骤也可用 )首先找到 控制面板 在控制面板中找到 Windows 防火墙 并点开在防火墙中 选择高级设置  在高级设置中选择 入站规则选择好 入站规则 后 在","link":"","raw":null,"photos":[],"categories":[{"name":"windows","slug":"windows","count":9,"path":"api/categories/windows.json"},{"name":"firewall","slug":"windows/firewall","count":1,"path":"api/categories/windows/firewall.json"},{"name":"port","slug":"windows/firewall/port","count":1,"path":"api/categories/windows/firewall/port.json"}],"tags":[{"name":"windows","slug":"windows","count":9,"path":"api/tags/windows.json"},{"name":"port","slug":"port","count":3,"path":"api/tags/port.json"},{"name":"firewall","slug":"firewall","count":1,"path":"api/tags/firewall.json"}]},{"title":"使用SpringBoot和Dubbo开发分布式系统","slug":"使用SpringBoot和Dubbo开发分布式系统","date":"2018-12-11T09:48:39.000Z","updated":"2018-12-11T09:48:39.879Z","comments":true,"path":"api/articles/使用SpringBoot和Dubbo开发分布式系统.json","excerpt":"","keywords":null,"cover":null,"content":"<p>首先我们先建立一个文件夹 demo 作为项目的存放目录 </p>\n<p>其次我们建立三个maven的jar项目</p>\n<p>分别为 demo-lib, demo-db, demo-web</p>\n<p>![image][<a href=\"https://static.oschina.net/uploads/space/2017/0517/100633_8H1J_2370543.png]\" target=\"_blank\" rel=\"noopener\">https://static.oschina.net/uploads/space/2017/0517/100633_8H1J_2370543.png]</a></p>\n<p>![image][<a href=\"https://static.oschina.net/uploads/space/2017/0517/100649_YQLE_2370543.png]\" target=\"_blank\" rel=\"noopener\">https://static.oschina.net/uploads/space/2017/0517/100649_YQLE_2370543.png]</a></p>\n<p>![image][<a href=\"https://static.oschina.net/uploads/space/2017/0517/100709_UJyB_2370543.png]\" target=\"_blank\" rel=\"noopener\">https://static.oschina.net/uploads/space/2017/0517/100709_UJyB_2370543.png]</a></p>\n<p>lib 用于 提供web和db互通的数据接口和接口</p>\n<p>web 用于 提供网站访问</p>\n<p>db 用于提供数据支持</p>\n<p>我们为了便于管理 使用 maven 的 parent 配置, 在demo 文件夹中 建立一个 pom.xml 文件 并写入以下内容:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"XML\"><figure class=\"iseeu highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0\"</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.demo<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>demo-parent<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">packaging</span>&gt;</span>pom<span class=\"tag\">&lt;/<span class=\"name\">packaging</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>$&#123;project.artifactId&#125;<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span>The parent project of demo<span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-parent<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.5.3.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">relativePath</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">modules</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">module</span>&gt;</span>demo-lib<span class=\"tag\">&lt;/<span class=\"name\">module</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">module</span>&gt;</span>demo-db<span class=\"tag\">&lt;/<span class=\"name\">module</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">module</span>&gt;</span>demo-web<span class=\"tag\">&lt;/<span class=\"name\">module</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">modules</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.source</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.source</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.target</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.target</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>dubbo<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.5.4-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">exclusions</span>&gt;</span>  </span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span>  </span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span>  </span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span>  </span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span>  </span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">exclusions</span>&gt;</span>  </span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.guava<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>guava<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>21.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.code.gson<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>gson<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.zookeeper<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>zookeeper<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.3.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.github.sgroschupf<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>zkclient<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>0.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.thoughtworks.xstream<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>xstream<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.4.9<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>fastjson<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.24<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-compiler-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">compilerArgument</span>&gt;</span>-parameters<span class=\"tag\">&lt;/<span class=\"name\">compilerArgument</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">source</span>&gt;</span>$&#123;maven.compiler.source&#125;<span class=\"tag\">&lt;/<span class=\"name\">source</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">target</span>&gt;</span>$&#123;maven.compiler.target&#125;<span class=\"tag\">&lt;/<span class=\"name\">target</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>spring-milestones<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>Spring Milestones<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://repo.spring.io/libs-milestone<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div></p>\n<p>其次 demo-lib , demo-db , demo-web 分别配置 pom.xml<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"XML\"><figure class=\"iseeu highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- demo-lib 的 pom.xml 配置 --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0\"</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.demo<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>demo-parent<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>demo-lib<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">packaging</span>&gt;</span>jar<span class=\"tag\">&lt;/<span class=\"name\">packaging</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- demo-db 的 pom.xml 配置 --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0\"</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.demo<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>demo-parent<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>demo-db<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">packaging</span>&gt;</span>jar<span class=\"tag\">&lt;/<span class=\"name\">packaging</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.demo<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>demo-lib<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;project.parent.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- demo-web 的 pom.xml 配置 --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0\"</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.demo<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>demo-parent<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>demo-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">packaging</span>&gt;</span>jar<span class=\"tag\">&lt;/<span class=\"name\">packaging</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.demo<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>demo-lib<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;project.parent.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-undertow<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">finalName</span>&gt;</span>demo-web<span class=\"tag\">&lt;/<span class=\"name\">finalName</span>&gt;</span>  </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">defaultGoal</span>&gt;</span>compile<span class=\"tag\">&lt;/<span class=\"name\">defaultGoal</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div></p>\n<p>配置好了pom.xml文件后 项目结构就出来了</p>\n<p>现在,我们在 Lib 中建立一个 Data 名为 Test (注意:结构需要可序列化 Serializable)</p>\n<p>再建立一个 接口 为 TestService</p>\n<p>在db模块中实现TestServiceImpl</p>\n<p>在web中使用TestService</p>\n<p>db模块中实现后需要注册到zookeeper中 需要设置 提供方的配置文件:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"XML\"><figure class=\"iseeu highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:dubbo</span>=<span class=\"string\">\"http://code.alibabatech.com/schema/dubbo\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">        http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 提供方应用信息，用于计算依赖关系 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:application</span> <span class=\"attr\">name</span>=<span class=\"string\">\"provider-of-demo\"</span>  /&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 使用multicast广播注册中心暴露服务地址 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:registry</span> <span class=\"attr\">address</span>=<span class=\"string\">\"zookeeper://192.168.80.251:2181?backup=192.168.80.252:2181,192.168.80.253:2181,192.168.80.254:2181\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 用dubbo协议在20880端口暴露服务,同一个机子上启动多个需要配置不同的 port --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:protocol</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dubbo\"</span> <span class=\"attr\">port</span>=<span class=\"string\">\"20881\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 和本地bean一样实现服务 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testService\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.demo.db.service.TestServiceImpl\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 声明需要暴露的服务接口 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:service</span> <span class=\"attr\">interface</span>=<span class=\"string\">\"com.demo.lib.service.TestService\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"testService\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div></p>\n<p>web模块使用需要 设置 使用方的 配置文件:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"XML\"><figure class=\"iseeu highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:dubbo</span>=<span class=\"string\">\"http://code.alibabatech.com/schema/dubbo\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans.xsd        http://code.alibabatech.com/schema/dubbo        http://code.alibabatech.com/schema/dubbo/dubbo.xsd\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 消费方应用名，用于计算依赖关系，不是匹配条件，不要与提供方一样 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:application</span> <span class=\"attr\">name</span>=<span class=\"string\">\"web-of-demo\"</span>  /&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 使用multicast广播注册中心暴露发现服务地址 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:registry</span> <span class=\"attr\">address</span>=<span class=\"string\">\"zookeeper://192.168.80.253:2181?backup=192.168.80.252:2181,192.168.80.251:2181,192.168.80.254:2181\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 生成远程服务代理，可以和本地bean一样使用demoService --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:reference</span> <span class=\"attr\">id</span>=<span class=\"string\">\"TestService\"</span> <span class=\"attr\">interface</span>=<span class=\"string\">\"com.demo.lib.service.TestService\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div></p>\n<p>完成后使用SpringBoot的启动方式启动:</p>\n<p>db模块的启动方式:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVA\"><figure class=\"iseeu highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"meta\">@ImportResource</span>(<span class=\"string\">\"classpath:provider.xml\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Launcher</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        SpringApplication.run(Launcher.class, args);</span><br><span class=\"line\">        Thread t = <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(Long.MAX_VALUE);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        t.start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div></p>\n<p>web模块的启动方式:<br><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVA\"><figure class=\"iseeu highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"meta\">@ImportResource</span>(<span class=\"string\">\"classpath:consumer.xml\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Launcher</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        SpringApplication.run(Launcher.class, args);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div></p>\n<p>启动完成后的测试效果:</p>\n<p>![image][<a href=\"https://static.oschina.net/uploads/space/2017/0517/102613_Da10_2370543.png]\" target=\"_blank\" rel=\"noopener\">https://static.oschina.net/uploads/space/2017/0517/102613_Da10_2370543.png]</a></p>\n<p>![image][<a href=\"https://static.oschina.net/uploads/space/2017/0517/102627_sO9N_2370543.png]\" target=\"_blank\" rel=\"noopener\">https://static.oschina.net/uploads/space/2017/0517/102627_sO9N_2370543.png]</a></p>\n<p>![image][<a href=\"https://static.oschina.net/uploads/space/2017/0517/102638_0BKb_2370543.png]\" target=\"_blank\" rel=\"noopener\">https://static.oschina.net/uploads/space/2017/0517/102638_0BKb_2370543.png]</a></p>\n<p>![image][<a href=\"https://static.oschina.net/uploads/space/2017/0517/102650_hUBA_2370543.png]\" target=\"_blank\" rel=\"noopener\">https://static.oschina.net/uploads/space/2017/0517/102650_hUBA_2370543.png]</a></p>\n<p>大家可以动手实验一下,本次使用的是zookeeper做注册发现服务,安装方式请参阅之前的blog内容</p>\n<p>地址: <a href=\"https://my.oschina.net/Kxvz/blog/718483\" target=\"_blank\" rel=\"noopener\">https://my.oschina.net/Kxvz/blog/718483</a></p>\n<p>此Demo源码地址: <a href=\"https://github.com/KevinAtlans/SpringDemo/tree/master/SpringDubbo/Demo\" target=\"_blank\" rel=\"noopener\">https://github.com/KevinAtlans/SpringDemo/tree/master/SpringDubbo/Demo</a></p>\n","text":"首先我们先建立一个文件夹 demo 作为项目的存放目录 其次我们建立三个maven的jar项目分别为 demo-lib, demo-db, demo-web![image][https://static.oschina.net/uploads/space/2017/0517/10","link":"","raw":null,"photos":[],"categories":[{"name":"java","slug":"java","count":21,"path":"api/categories/java.json"},{"name":"Spring","slug":"java/Spring","count":2,"path":"api/categories/java/Spring.json"},{"name":"dubbo","slug":"java/Spring/dubbo","count":1,"path":"api/categories/java/Spring/dubbo.json"}],"tags":[{"name":"java","slug":"java","count":25,"path":"api/tags/java.json"},{"name":"spring-boot","slug":"spring-boot","count":3,"path":"api/tags/spring-boot.json"},{"name":"dubbo","slug":"dubbo","count":1,"path":"api/tags/dubbo.json"},{"name":"分布式","slug":"分布式","count":1,"path":"api/tags/分布式.json"}]},{"title":"使用Redis-cli操作Redis","slug":"使用Redis-cli操作Redis","date":"2018-12-11T09:44:18.000Z","updated":"2018-12-11T09:44:18.475Z","comments":true,"path":"api/articles/使用Redis-cli操作Redis.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 使用端口和密码登录</span></span><br><span class=\"line\">redis-cli -p 6379 -a test123</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 先使用端口进入 然后在授权密码</span></span><br><span class=\"line\">redis-cli -p 6379</span><br><span class=\"line\"></span><br><span class=\"line\">127.0.0.1:6379&gt; auth test123</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 清空所有缓存</span></span><br><span class=\"line\">127.0.0.1:6379&gt; flushall</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 查询所有存在缓存数据</span></span><br><span class=\"line\">127.0.0.1:6379&gt; keys <span class=\"string\">'*'</span></span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>## 使用端口和密码登录<br>redis-cli -p 6379 -a test123<br><br>## 先使用端口进入 然后在授权密码<","link":"","raw":null,"photos":[],"categories":[{"name":"redis","slug":"redis","count":1,"path":"api/categories/redis.json"}],"tags":[{"name":"redis","slug":"redis","count":3,"path":"api/tags/redis.json"},{"name":"redis-cli","slug":"redis-cli","count":1,"path":"api/tags/redis-cli.json"}]},{"title":"Java向RocketMQ中发送数据","slug":"Java向RocketMQ中发送数据","date":"2018-12-11T09:43:44.000Z","updated":"2018-12-11T09:43:44.796Z","comments":true,"path":"api/articles/Java向RocketMQ中发送数据.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVA\"><figure class=\"iseeu highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RocketProducer</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> DefaultMQProducer producer;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">RocketProducer</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.init();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (producer == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                producer = <span class=\"keyword\">new</span> DefaultMQProducer(<span class=\"string\">\"DataRecord\"</span>);</span><br><span class=\"line\">                producer.setNamesrvAddr(<span class=\"string\">\"192.168.1.11:9876\"</span>);</span><br><span class=\"line\">                producer.start();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (Exception ex) &#123;</span><br><span class=\"line\">                LogUtil.error(ex);</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.destory();</span><br><span class=\"line\">                producer = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">send</span><span class=\"params\">(String group, String queue, <span class=\"keyword\">byte</span>[] message)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.init();</span><br><span class=\"line\">            Message msg = <span class=\"keyword\">new</span> Message(group, queue, message);</span><br><span class=\"line\">            SendResult result = producer.send(msg);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> (SendStatus.SEND_OK.equals(result.getSendStatus()));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception ex) &#123;</span><br><span class=\"line\">            LogUtil.error(ex);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">destory</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.producer != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.producer.shutdown();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<p>文档地址: <a href=\"https://rocketmq.incubator.apache.org/docs/best-practice-producer/\" target=\"_blank\" rel=\"noopener\">https://rocketmq.incubator.apache.org/docs/best-practice-producer/</a></p>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"java","slug":"java","count":21,"path":"api/categories/java.json"},{"name":"rocketmq","slug":"java/rocketmq","count":1,"path":"api/categories/java/rocketmq.json"}],"tags":[{"name":"java","slug":"java","count":25,"path":"api/tags/java.json"},{"name":"rocketmq","slug":"rocketmq","count":1,"path":"api/tags/rocketmq.json"},{"name":"producer","slug":"producer","count":1,"path":"api/tags/producer.json"}]},{"title":"在Centos7上搭建Ngrok服务","slug":"在Centos7上搭建Ngrok服务","date":"2018-12-11T09:42:59.000Z","updated":"2018-12-11T09:42:59.246Z","comments":true,"path":"api/articles/在Centos7上搭建Ngrok服务.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 首先先装好一些编译需要使用的工具</span></span><br><span class=\"line\">yum -y install zlib-devel openssl-devel perl hg cpio expat-devel gettext-devel curl curl-devel </span><br><span class=\"line\">perl-ExtUtils-MakeMaker hg wget gcc gcc-c++</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装好Git 最好是1.8+</span></span><br><span class=\"line\">yum install -y git</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装 Go 一定注意要找 1.4.3版本的 下载地址:https://golang.org/dl/   </span></span><br><span class=\"line\">wget https://storage.googleapis.com/golang/go1.4.3.linux-amd64.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">tar -C /usr/<span class=\"built_in\">local</span> -xzf go1.4.3.linux-amd64.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 添加Go的环境变量 首先打开 profile 在最后加上 export PATH=$PATH:/usr/local/go/bin</span></span><br><span class=\"line\"></span><br><span class=\"line\">vi /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$PATH</span>:/usr/<span class=\"built_in\">local</span>/go/bin</span><br><span class=\"line\"></span><br><span class=\"line\">go version</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 下载 ngrok 源码</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/inconshreveable/ngrok.git</span><br><span class=\"line\"><span class=\"built_in\">export</span> GOPATH=/usr/<span class=\"built_in\">local</span>/ngrok/</span><br><span class=\"line\"><span class=\"built_in\">export</span> NGROK_DOMAIN=<span class=\"string\">\"[此处填写你的域名:如: baidu.com]\"</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ngrok</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 生成SSL证书 用于 Ngrok 服务端和客户端通信认证使用</span></span><br><span class=\"line\"></span><br><span class=\"line\">openssl genrsa -out rootCA.key 2048</span><br><span class=\"line\">openssl req -x509 -new -nodes -key rootCA.key -subj <span class=\"string\">\"/CN=<span class=\"variable\">$NGROK_DOMAIN</span>\"</span> -days 5000 -out rootCA.pem</span><br><span class=\"line\">openssl genrsa -out server.key 2048</span><br><span class=\"line\">openssl req -new -key server.key -subj <span class=\"string\">\"/CN=<span class=\"variable\">$NGROK_DOMAIN</span>\"</span> -out server.csr</span><br><span class=\"line\">openssl x509 -req -<span class=\"keyword\">in</span> server.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out server.crt -days 5000</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 复制证书到 tls下</span></span><br><span class=\"line\"></span><br><span class=\"line\">\\cp -r rootCA.pem assets/client/tls/ngrokroot.crt</span><br><span class=\"line\">\\cp -r server.crt assets/server/tls/snakeoil.crt</span><br><span class=\"line\">\\cp -r server.key assets/server/tls/snakeoil.key</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 国内的网络环境需要改一点代码</span></span><br><span class=\"line\"></span><br><span class=\"line\">vi /usr/<span class=\"built_in\">local</span>/ngrok/src/ngrok/<span class=\"built_in\">log</span>/logger.go</span><br><span class=\"line\"><span class=\"built_in\">log</span> <span class=\"string\">\"github.com/keepeye/log4go\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 编译Server端 注意替换 GOOS 和 GOARCH , 具体的值可以通过命令 go env 查看</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/go/src</span><br><span class=\"line\">GOOS=linux GOARCH=amd64 ./make.bash</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/ngrok/</span><br><span class=\"line\">GOOS=linux GOARCH=amd64 make release-server</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 编译客户端</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/go/src</span><br><span class=\"line\">GOOS=linux GOARCH=amd64 ./make.bash</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/ngrok/</span><br><span class=\"line\">GOOS=linux GOARCH=amd64 make release-client</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 服务端启动</span></span><br><span class=\"line\"></span><br><span class=\"line\">/usr/<span class=\"built_in\">local</span>/ngrok/bin/ngrokd -domain=<span class=\"string\">\"<span class=\"variable\">$NGROK_DOMAIN</span>\"</span> -httpAddr=<span class=\"string\">\":80\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 客户端配置文件</span></span><br><span class=\"line\">server_addr: <span class=\"string\">\"ngrok.sunnyos.com:4443\"</span></span><br><span class=\"line\">trust_host_root_certs: <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动客户端</span></span><br><span class=\"line\">./ngrok -config=./ngrok.cfg -subdomain=blog 80</span><br><span class=\"line\"></span><br><span class=\"line\">setsid ./ngrok -config=./ngrok.cfg -subdomain=<span class=\"built_in\">test</span> 80 <span class=\"comment\">#在linux下如果想后台运行</span></span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"ngrok","slug":"Centos/ngrok","count":1,"path":"api/categories/Centos/ngrok.json"},{"name":"nat","slug":"Centos/ngrok/nat","count":1,"path":"api/categories/Centos/ngrok/nat.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"nat","slug":"nat","count":2,"path":"api/tags/nat.json"},{"name":"ngrok","slug":"ngrok","count":1,"path":"api/tags/ngrok.json"}]},{"title":"Centos7中超简单的Docker入门","slug":"Centos7中超简单的Docker入门","date":"2018-12-11T09:42:13.000Z","updated":"2018-12-11T09:42:13.326Z","comments":true,"path":"api/articles/Centos7中超简单的Docker入门.json","excerpt":"","keywords":null,"cover":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 使用yum安装docker</span></span><br><span class=\"line\">yum install docker-io -y</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 直接yum安装，安装成功后查看版本</span></span><br><span class=\"line\">docker -v</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动docker</span></span><br><span class=\"line\">service docker start</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 设置开机启动</span></span><br><span class=\"line\">chkconfig docker on</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 使用腾讯国内镜像源</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"OPTIONS='--registry-mirror=https://mirror.ccs.tencentyun.com'\"</span> &gt;&gt; /etc/sysconfig/docker</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 重新载入 systemd</span></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 重新启动docker</span></span><br><span class=\"line\">service docker restart</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 在Docker中下载一个官方的 CentOS 镜像到本地</span></span><br><span class=\"line\">docker pull centos</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看镜像列表</span></span><br><span class=\"line\">docker images</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 运行一个 Centos镜像为模板生成的容器 并使用 bash shell</span></span><br><span class=\"line\">docker run -it centos /bin/bash</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 在容器中操作不会影响到宿主机</span></span><br><span class=\"line\">mkdir -p /data/simple_docker</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看创建出的目录</span></span><br><span class=\"line\">ls /data</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###退出容器</span></span><br><span class=\"line\"><span class=\"built_in\">exit</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 在宿主机中查看目录 确认没有影响</span></span><br><span class=\"line\">ls /data</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看所有的容器信息</span></span><br><span class=\"line\">docker ps -a</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 保存镜像 需要使用到容器信息中的 CONTAINER_ID 和 IMAGE</span></span><br><span class=\"line\">docker commit -m=<span class=\"string\">\"备注\"</span> CONTAINER_ID IMAGE</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##$ 如:</span></span><br><span class=\"line\">docker commit -m=<span class=\"string\">\"备注\"</span> 5b2ed8fbc835 centos</span><br></pre></td></tr></table></figure></div>\n","text":"1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br","link":"","raw":null,"photos":[],"categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"docker","slug":"Centos/docker","count":1,"path":"api/categories/Centos/docker.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"docker","slug":"docker","count":1,"path":"api/tags/docker.json"}]}]}