{"title":"Centos常用操作记录","slug":"Centos常用操作记录","date":"2018-12-11T10:39:21.000Z","updated":"2018-12-11T10:39:21.309Z","comments":true,"path":"api/articles/Centos常用操作记录.json","photos":[],"link":"","excerpt":"","covers":null,"content":"<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 重新设置nohup的输出文件</span></span><br><span class=\"line\">nohup <span class=\"built_in\">command</span> &gt; myout.file 2&gt;&amp;1 &amp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 修改文件夹以及文件夹下的子文件权限</span></span><br><span class=\"line\">chmod 755 files/ -R</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 设置开机启动服务 ssh</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> sshd.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 禁用开机启动服务  firewalld</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">disable</span> firewalld.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### Centos 解压 *.tar.xz 文件 </span></span><br><span class=\"line\">tar -xvJf *.tar.xz</span><br><span class=\"line\"><span class=\"comment\">### 如果这条命令出现错误:</span></span><br><span class=\"line\"><span class=\"comment\">### tar (child): xz: Cannot exec: No such file or directory</span></span><br><span class=\"line\"><span class=\"comment\">### tar (child): Error is not recoverable: exiting now</span></span><br><span class=\"line\"><span class=\"comment\">### 请安装:   yum install xz -y</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看ssh服务</span></span><br><span class=\"line\">systemctl list-unit-files | grep ssh</span><br><span class=\"line\"><span class=\"comment\">###启动SSH服务</span></span><br><span class=\"line\">systemctl start sshd.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装常用工具 如: iostat</span></span><br><span class=\"line\">yum install sysstat -y</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### Centos 解压 *.tar.gz 文件 </span></span><br><span class=\"line\">tar -xzvf *.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 解压 *.tar 文件</span></span><br><span class=\"line\">tar -xvf *.tar</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 解压 *.tar.bz2 文件</span></span><br><span class=\"line\">tar -xjvf *.tar.bz2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 解压 *.tar.Z 文件</span></span><br><span class=\"line\">tar -xZvf *.tar.Z</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看连接数</span></span><br><span class=\"line\">netstat -nat |awk <span class=\"string\">'&#123;print $6&#125;'</span>|sort|uniq -c|sort -rn</span><br><span class=\"line\"></span><br><span class=\"line\">netstat -n | awk <span class=\"string\">'/^tcp/ &#123;++S[$NF]&#125; END &#123;for(a in S) print a, S[a]&#125;'</span></span><br><span class=\"line\"></span><br><span class=\"line\">netstat -ano | grep 80 | grep -v EST | less</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看80端口的连接数</span></span><br><span class=\"line\">netstat -nat|grep -i <span class=\"string\">\"80\"</span>|wc -l</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 安装常用的工具</span></span><br><span class=\"line\">yum install -y gcc gcc-c++ openssl-devel unixODBC-devel</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### ==单用户修改密码================================================</span></span><br><span class=\"line\"><span class=\"comment\">### Centos7 忘记密码 单用户修改</span></span><br><span class=\"line\"><span class=\"comment\">### 将ro改为rw init=/sysroot/bin/sh</span></span><br><span class=\"line\"><span class=\"comment\">### 进入chroot</span></span><br><span class=\"line\">chroot /sysroot</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 重置密码</span></span><br><span class=\"line\">passwd root</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 更新系统信息</span></span><br><span class=\"line\">touch /.autorelabel</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 退出chroot</span></span><br><span class=\"line\"><span class=\"built_in\">exit</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 重启</span></span><br><span class=\"line\">init 6</span><br><span class=\"line\"><span class=\"comment\">### ==单用户修改密码结束================================================</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###Centos7 停用防火墙</span></span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 查看mongo程序的监听端口</span></span><br><span class=\"line\">netstat -tnlp | grep mongod</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动Memcached服务</span></span><br><span class=\"line\">./memcached -d -m 256 -u root -p 11211 -c 1024 –P /tmp/memcached.pid</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 后台启动Redis服务</span></span><br><span class=\"line\">./redis-server &amp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 后台启动RabbitMQ服务</span></span><br><span class=\"line\">./rabbitmq-server start -detached</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动Solr服务</span></span><br><span class=\"line\">./solr start -p 8984</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 启动MongoDB服务</span></span><br><span class=\"line\">./mongod --maxConns=100 --port=27017 --bind_ip=127.0.0.1 --dbpath=/opt/mongodb/data/db --logpath=/opt/mongodb/data/<span class=\"built_in\">log</span>/mongodb.log --logappend --fork</span><br></pre></td></tr></table></figure></div>\n","categories":[{"name":"Centos","slug":"Centos","count":30,"path":"api/categories/Centos.json"},{"name":"bash","slug":"Centos/bash","count":1,"path":"api/categories/Centos/bash.json"}],"tags":[{"name":"Centos","slug":"Centos","count":29,"path":"api/tags/Centos.json"},{"name":"bash","slug":"bash","count":1,"path":"api/tags/bash.json"}]}